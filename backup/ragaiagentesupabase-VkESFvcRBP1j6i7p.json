{"createdAt":"2025-09-23T18:11:26.383Z","updatedAt":"2025-09-23T18:53:24.010Z","id":"VkESFvcRBP1j6i7p","name":"RAGAIAgenteSupabase","active":false,"isArchived":false,"nodes":[{"parameters":{"aggregate":"aggregateAllItemData","options":{}},"id":"7743e9b7-2322-40e3-bcb3-0f2ba5f11f55","name":"Aggregate1","type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[3552,816]},{"parameters":{"fieldsToSummarize":{"values":[{"aggregation":"concatenate","field":"data"}]},"options":{}},"id":"95031f66-b566-4f65-8b7d-86af0efd15d0","name":"Summarize1","type":"n8n-nodes-base.summarize","typeVersion":1,"position":[3744,816]},{"parameters":{"operation":"pdf","options":{}},"id":"4a33b52e-ef20-4f62-8636-9fda4baf66e9","name":"Extract PDF Text","type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[3344,480]},{"parameters":{"operation":"xlsx","options":{}},"id":"420bc8d6-a173-4d4d-8168-2132d87295b0","name":"Extract from Excel","type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[3344,816]},{"parameters":{"assignments":{"assignments":[{"id":"10646eae-ae46-4327-a4dc-9987c2d76173","name":"file_id","value":"={{ $('File Updated').item.json.id }}","type":"string"},{"id":"f4536df5-d0b1-4392-bf17-b8137fb31a44","name":"file_type","value":"={{ $('File Updated').item.json.mimeType }}","type":"string"}]},"options":{}},"id":"b5c5aa36-6fe2-451b-824f-d1d553a110cc","name":"Set File ID","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1984,1648]},{"parameters":{"operation":"delete","tableId":"documents","filterType":"string","filterString":"=metadata->>file_id=like.*{{ $('Set File ID').item.json.file_id }}*"},"id":"c663f9a5-d7ea-4b4c-90c5-737ca50978a9","name":"Delete Old Doc Rows","type":"n8n-nodes-base.supabase","typeVersion":1,"position":[2368,1648],"alwaysOutputData":true},{"parameters":{"operation":"download","fileId":{"__rl":true,"value":"={{ $('Set File ID').item.json.file_id }}","mode":"id"},"options":{"googleFileConversion":{"conversion":{"docsToFormat":"text/plain"}}}},"id":"e5a2d1a1-6d4b-4792-aa52-a9e57510bd98","name":"Download File","type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[3312,1808],"executeOnce":true},{"parameters":{"method":"POST","url":"=https://www.googleapis.com/drive/v3/files/{{ $('Set File ID1').item.json.file_id }}/copy","authentication":"predefinedCredentialType","nodeCredentialType":"googleDriveOAuth2Api","sendBody":true,"bodyParameters":{"parameters":[{"name":"name","value":"={{ $('Set File ID1').item.json.name }}"},{"name":"mimeType","value":"application/vnd.google-apps.document"}]},"options":{}},"id":"375d8cb2-c62e-4c4d-bfed-61cb34977019","name":"Convert to Google Doc1","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[3344,1008]},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"928b5cae-77cd-48a2-81ef-2f76dc441b0a","leftValue":"={{ $('File Updated').item.json.mimeType }}","rightValue":"application/vnd.google-apps.document","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}},{"id":"6368b5ad-32b0-491d-a27d-5cc3ad5c2a11","leftValue":"={{ ((Date.now() - Date.parse($('File Updated').item.json.createdTime)) / 1000) }}","rightValue":60,"operator":{"type":"number","operation":"lt"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[2144,1648],"id":"3d03a8fb-870c-4261-8d65-354dc0bbbbf6","name":"If","onError":"continueRegularOutput"},{"parameters":{"operation":"deleteFile","fileId":{"__rl":true,"value":"={{ $('Set File ID1').item.json.file_id }}","mode":"id"},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[3552,1008],"id":"d06f6e02-5c96-4b1c-977a-18b911f2e302","name":"Delete File"},{"parameters":{"assignments":{"assignments":[{"id":"10646eae-ae46-4327-a4dc-9987c2d76173","name":"file_id","value":"={{ $('File Created').item.json.id }}","type":"string"},{"id":"f4536df5-d0b1-4392-bf17-b8137fb31a44","name":"file_type","value":"={{ $('File Created').item.json.mimeType }}","type":"string"}]},"options":{}},"id":"d44f3b69-af2b-42ab-a408-1c8b79188f33","name":"Set File ID1","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[2048,784]},{"parameters":{"operation":"download","fileId":{"__rl":true,"value":"={{ $('Set File ID1').item.json.file_id }}","mode":"id"},"options":{"googleFileConversion":{"conversion":{"docsToFormat":"text/plain"}}}},"id":"8d32bb64-6fcd-411f-a95f-322629c3acd5","name":"Download File1","type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[2368,944],"executeOnce":true,"credentials":{"googleDriveOAuth2Api":{"id":"8G4VgOQRG6X5KJnF","name":"Google Drive account"}}},{"parameters":{"aggregate":"aggregateAllItemData","options":{}},"id":"deaec817-ca1e-4f48-838e-f90788501f23","name":"Aggregate","type":"n8n-nodes-base.aggregate","typeVersion":1,"position":[4064,1744]},{"parameters":{"fieldsToSummarize":{"values":[{"aggregation":"concatenate","field":"data"}]},"options":{}},"id":"e73626fb-f3cd-4157-b7de-38a426491666","name":"Summarize","type":"n8n-nodes-base.summarize","typeVersion":1,"position":[4272,1744]},{"parameters":{"operation":"pdf","options":{}},"id":"c06563f3-661d-4654-88ad-43335539ec82","name":"Extract PDF Text1","type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[3872,1408]},{"parameters":{"operation":"xlsx","options":{}},"id":"7a0ceae1-1e26-4f43-aee5-ee513a0c791b","name":"Extract from Excel1","type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[3872,1744]},{"parameters":{"method":"POST","url":"=https://www.googleapis.com/drive/v3/files/{{ $('Set File ID').item.json.file_id }}/copy","authentication":"predefinedCredentialType","nodeCredentialType":"googleDriveOAuth2Api","sendBody":true,"bodyParameters":{"parameters":[{"name":"name","value":"={{ $('Set File ID').item.json.name }}"},{"name":"mimeType","value":"application/vnd.google-apps.document"}]},"options":{}},"id":"3213f00f-4e7f-4203-aab5-a0f99bb4ed49","name":"Convert to Google Doc2","type":"n8n-nodes-base.httpRequest","typeVersion":4.1,"position":[3872,1936]},{"parameters":{"operation":"deleteFile","fileId":{"__rl":true,"value":"={{ $('Set File ID').item.json.file_id }}","mode":"id"},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[4064,1936],"id":"57d2034e-0470-4359-8f10-c324e8d5a344","name":"Delete File1"},{"parameters":{"chunkSize":2000,"chunkOverlap":200,"options":{"splitCode":"markdown"}},"type":"@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter","typeVersion":1,"position":[4272,896],"id":"fffb9786-62af-4650-a0a6-074d9a626561","name":"Recursive Character Text Splitter"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.1,"position":[3968,800],"id":"853e1bec-c145-48af-a05b-383182d8872c","name":"Embeddings OpenAI1"},{"parameters":{"chunkSize":2000,"chunkOverlap":200,"options":{}},"type":"@n8n/n8n-nodes-langchain.textSplitterRecursiveCharacterTextSplitter","typeVersion":1,"position":[4688,1888],"id":"4e44a102-b71b-4a14-8e4f-9babccc468b6","name":"Recursive Character Text Splitter1"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.1,"position":[4512,1696],"id":"210b9c6c-6718-4f45-8280-0fd6f4463316","name":"Embeddings OpenAI2"},{"parameters":{"content":"# Trigger que escuta o drive quando novos arquivos são incluídos","height":740,"width":2780,"color":4},"type":"n8n-nodes-base.stickyNote","position":[1760,416],"typeVersion":1,"id":"608f5104-09df-4bd7-9a15-269a73cfa12d","name":"Sticky Note1"},{"parameters":{"content":"# Trigger que escuta o drive quando novos arquivos são atualizados","height":888.3491772897637,"width":3306.7699150920453,"color":5},"type":"n8n-nodes-base.stickyNote","position":[1760,1264],"typeVersion":1,"id":"e91b0ff6-c039-4df6-bde3-e0d6c05cd2de","name":"Sticky Note3"},{"parameters":{"options":{}},"type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[2208,784],"id":"d849d5d3-a2cc-4817-a82d-bbb1225d5a65","name":"Loop Over Items"},{"parameters":{"jsonMode":"expressionData","jsonData":"={{ $json.data || $json.text || $json.concatenated_data }}","options":{"metadata":{"metadataValues":[{"name":"=file_id","value":"={{ $('Set File ID1').item.json.file_id }}"},{"name":"=version","value":"v1"},{"name":"=creator","value":"={{ $('File Created').item.json.owners[0].displayName }}"},{"name":"=created_at","value":"={{ $('File Created').item.json.createdTime }}"},{"name":"last_modified","value":"={{ $('File Created').item.json.modifiedTime }}"},{"name":"folder_path","value":"projects"},{"name":"file_name","value":"={{ $('File Created').item.json.name }}"},{"name":"file_extension","value":"={{ $('File Created').item.json.mimeType }}"}]}}},"id":"5c8cb0e3-339a-4604-b911-1283e746e37b","name":"Enhanced Default Data Loader1","type":"@n8n/n8n-nodes-langchain.documentDefaultDataLoader","typeVersion":1,"position":[4128,704]},{"parameters":{"jsonMode":"expressionData","jsonData":"={{ $json.data || $json.text || $json.concatenated_data }}","options":{"metadata":{"metadataValues":[{"name":"=file_id","value":"={{ $('Set File ID').item.json.file_id }}"},{"name":"=version","value":"={{ $('Set Version').item.json.message.content.version }}"},{"name":"=creator","value":"={{ $('File Updated').item.json.owners[0].displayName }}"},{"name":"=created_at","value":"={{ $('File Updated').item.json.createdTime }}"},{"name":"=last_modified","value":"={{ $('File Updated').item.json.modifiedTime }}"},{"name":"=folder_path","value":"projects"},{"name":"=file_name","value":"={{ $('File Updated').item.json.name }}"},{"name":"=file_extension","value":"={{ $('File Updated').item.json.mimeType }}"}]}}},"id":"35c180aa-bc53-4371-bcc9-ac8605281e28","name":"Enhanced Default Data Loader2","type":"@n8n/n8n-nodes-langchain.documentDefaultDataLoader","typeVersion":1,"position":[4768,1648]},{"parameters":{"options":{}},"type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[3152,1648],"id":"976370d0-2626-436c-9ea2-bc0b69a998dd","name":"Loop Over Items1"},{"parameters":{"pollTimes":{"item":[{"mode":"everyMinute"}]},"triggerOn":"specificFolder","folderToWatch":{"__rl":true,"value":"1TdnGrO0UFHboSBFMYCT1T0w17OwMct6E","mode":"list","cachedResultName":"Projects","cachedResultUrl":"https://drive.google.com/drive/folders/1TdnGrO0UFHboSBFMYCT1T0w17OwMct6E"},"event":"fileCreated","options":{}},"id":"6773352a-71e7-4070-92f2-5855aa83b41e","name":"File Created","type":"n8n-nodes-base.googleDriveTrigger","typeVersion":1,"position":[1840,784]},{"parameters":{"pollTimes":{"item":[{"mode":"everyMinute"}]},"triggerOn":"specificFolder","folderToWatch":{"__rl":true,"value":"1TdnGrO0UFHboSBFMYCT1T0w17OwMct6E","mode":"list","cachedResultName":"Projects","cachedResultUrl":"https://drive.google.com/drive/folders/1TdnGrO0UFHboSBFMYCT1T0w17OwMct6E"},"event":"fileUpdated","options":{}},"id":"9157e2f4-6d6b-42ad-99eb-69ae5038f80e","name":"File Updated","type":"n8n-nodes-base.googleDriveTrigger","typeVersion":1,"position":[1808,1648]},{"parameters":{"mode":"insert","tableName":{"__rl":true,"value":"documents","mode":"id"},"options":{"queryName":"match_documents"}},"id":"83567ace-7cdd-4622-adaa-7a4c0347dbec","name":"Insert into Supabase Vectorstore","type":"@n8n/n8n-nodes-langchain.vectorStoreSupabase","typeVersion":1,"position":[4544,1408]},{"parameters":{"operation":"text","options":{}},"id":"6efba49d-27c1-4c33-937d-e155a6e5e26f","name":"Extract from Text File","type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[3344,640],"alwaysOutputData":true},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"leftValue":"={{ $('Set File ID').item.json.file_type }}","rightValue":"application/pdf","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"PDF"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"fc193b06-363b-4699-a97d-e5a850138b0e","leftValue":"={{ $('Set File ID').item.json.file_type }}","rightValue":"application/vnd.google-apps.document","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"Text File"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"2ae7faa7-a936-4621-a680-60c512163034","leftValue":"={{ $('Set File ID').item.json.file_type }}","rightValue":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"Excel"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"7ddfa924-1c26-4ee3-9890-5c9d2b96717a","leftValue":"={{ $('Set File ID').item.json.file_type }}","rightValue":"application/vnd.openxmlformats-officedocument.wordprocessingml.document","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"Windows Doc(1)"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"f53caf8b-7a8f-4d1e-98f4-deaf0e0171f0","leftValue":"={{ $('Set File ID').item.json.file_type }}","rightValue":"application/msword","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"Windows Doc(2)"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"cd9ca627-d00d-4c30-903a-41f603c8e36f","leftValue":"={{ $('Set File ID').item.json.file_type }}","rightValue":"application/vnd.ms-word","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"Windows Doc(3)"}]},"options":{"fallbackOutput":2}},"id":"978c1640-f1be-4eb9-9587-8b6caa861e77","name":"Switch","type":"n8n-nodes-base.switch","typeVersion":3,"position":[3568,1616]},{"parameters":{"operation":"text","options":{}},"id":"b2210dde-e7a6-413d-8a8c-c6a8241b94aa","name":"Extract from Text File1","type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[3872,1568],"alwaysOutputData":true},{"parameters":{},"id":"4403e14a-84c2-4f37-bc70-6455e9e05fb4","name":"Limit","type":"n8n-nodes-base.limit","typeVersion":1,"position":[2528,1648]},{"parameters":{"options":{}},"id":"b23bd832-c159-49cc-9388-bcaf839e9344","name":"When chat message received","type":"@n8n/n8n-nodes-langchain.chatTrigger","typeVersion":1.1,"position":[672,896],"webhookId":"e9325791-143d-4aea-be69-160d6bbf9653"},{"parameters":{"contextWindowLength":10},"id":"1946d887-4b64-4466-8cb8-148e3aa4bb37","name":"Postgres Chat Memory","type":"@n8n/n8n-nodes-langchain.memoryPostgresChat","typeVersion":1.1,"position":[928,1120]},{"parameters":{"name":"database","description":"retrieves data about projects"},"id":"55de6377-b828-40bd-9126-5184bd16ae2c","name":"Vector Store Tool","type":"@n8n/n8n-nodes-langchain.toolVectorStore","typeVersion":1,"position":[1152,1120]},{"parameters":{"options":{}},"id":"746a8eb0-d6ef-4afb-b2b4-029db209be79","name":"Embeddings OpenAI","type":"@n8n/n8n-nodes-langchain.embeddingsOpenAi","typeVersion":1.1,"position":[864,1456]},{"parameters":{"tableName":{"__rl":true,"value":"documents","mode":"list","cachedResultName":"documents"},"options":{"queryName":"match_documents"}},"id":"1042500f-d2f4-477c-ace5-7bf5865da9a8","name":"Supabase Vector Store","type":"@n8n/n8n-nodes-langchain.vectorStoreSupabase","typeVersion":1,"position":[944,1280],"credentials":{"supabaseApi":{"id":"smA3dHKgaucYB4Sp","name":"Supabase - Taysa"}}},{"parameters":{"content":"# RAG AI Agent para Teste\n","height":847.7499999999999,"width":1262.1803336071664},"id":"3c5bcf58-8c31-4631-ae57-a8597d5b559c","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[352,800]},{"parameters":{"rules":{"values":[{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"leftValue":"={{ $('Set File ID1').item.json.file_type }}","rightValue":"application/pdf","operator":{"type":"string","operation":"equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"PDF"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"fc193b06-363b-4699-a97d-e5a850138b0e","leftValue":"={{ $('Set File ID1').item.json.file_type }}","rightValue":"application/vnd.google-apps.document","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"Text File"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"2ae7faa7-a936-4621-a680-60c512163034","leftValue":"={{ $('Set File ID1').item.json.file_type }}","rightValue":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"Excel"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"7ddfa924-1c26-4ee3-9890-5c9d2b96717a","leftValue":"={{ $('Set File ID1').item.json.file_type }}","rightValue":"application/vnd.openxmlformats-officedocument.wordprocessingml.document","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"Windows Doc(1)"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"f53caf8b-7a8f-4d1e-98f4-deaf0e0171f0","leftValue":"={{ $('Set File ID1').item.json.file_type }}","rightValue":"application/msword","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"Windows Doc(2)"},{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":1},"conditions":[{"id":"cd9ca627-d00d-4c30-903a-41f603c8e36f","leftValue":"={{ $('Set File ID1').item.json.file_type }}","rightValue":"application/vnd.ms-word","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"renameOutput":true,"outputKey":"Windows Doc(3)"}]},"options":{"fallbackOutput":2}},"id":"f2dc338a-ccf2-43cb-b557-cf08f909d582","name":"Switch2","type":"n8n-nodes-base.switch","typeVersion":3,"position":[2768,704]},{"parameters":{"modelId":{"__rl":true,"value":"gpt-4o-mini","mode":"list","cachedResultName":"GPT-4O-MINI"},"messages":{"values":[{"content":"Your goal is to take the incoming version number and add 1 to it. \n\n[Examples]\nInput: v1\nOutput: v2\n\nInput: v2\nOutput: v3\n\nInput: v4\nOutput: v5 \n\nThe output field should always be called \"version\"","role":"system"},{"content":"=incoming version number: {{ $json.metadata.version }}"}]},"jsonOutput":true,"options":{}},"id":"6cf25f5a-52e2-4205-8dc0-2688edf4dcb6","name":"Set Version","type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.7,"position":[2752,1648]},{"parameters":{"mode":"insert","tableName":{"__rl":true,"value":"=documents","mode":"id"},"options":{"queryName":"match_documents"}},"id":"16ee8151-6e36-476f-8663-8997af2b68df","name":"Insert into Supabase Vectorstore1","type":"@n8n/n8n-nodes-langchain.vectorStoreSupabase","typeVersion":1,"position":[3952,496]},{"parameters":{"options":{}},"id":"72150075-a397-47d3-947a-ba91a251a94f","name":"Agente RAF","type":"@n8n/n8n-nodes-langchain.agent","typeVersion":1.7,"position":[880,896]},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenRouter","typeVersion":1,"position":[752,1120],"id":"0de8886e-d735-4022-86c4-0e711ef2cb92","name":"GPT-4O-mini"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenRouter","typeVersion":1,"position":[1312,1328],"id":"d5c2ae3b-008b-412f-bc88-2d0cab6e747b","name":"GPT 4o-min"},{"parameters":{"content":"","height":2160,"width":5080,"color":3},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[80,96],"id":"186bec69-66c7-4169-945c-63e50a60e010","name":"Sticky Note2"},{"parameters":{"content":"█████▄░▄████▄░▄██████░░░▄████▄░██████░░░▄████▄░▄██████░▄█████░██████▄░████████░▄█████░░░██████▄░▄█████▄░░░▄██████░██░░░██░█████▄░▄████▄░█████▄░▄██████░▄█████░░░░░░░░░░█████▄░██░░██░░░█████▄░██████░▄█████░██████▄░▄█████░██░░░██░▄█████░▄██████\n██░░██░██░░██░██░░░░░░░░██░░██░░░██░░░░░██░░██░██░░░░░░██░░░░░██░░░██░░░░██░░░░██░░░░░░░██░░░██░██░░░██░░░██░░░░░░██░░░██░██░░██░██░░██░██░░██░██░░░░░░██░░░░░░░░░░░░░░██░░██░██░░██░░░██░░██░░░██░░░██░░░░░██░░░██░██░░░░░██░░░██░██░░░░░██░░░░░\n█████▀░██░░██░██░░███░░░██░░██░░░██░░░░░██░░██░██░░███░█████░░██░░░██░░░░██░░░░█████░░░░██░░░██░██░░░██░░░▀█████▄░██░░░██░█████▀░██░░██░█████░░▀█████▄░█████░░░░░░░░░░░█████░░▀████▀░░░█████▀░░░██░░░██░░░░░██░░░██░█████░░██░░░██░█████░░▀█████▄\n██░░██░██████░██░░░██░░░██████░░░██░░░░░██████░██░░░██░██░░░░░██░░░██░░░░██░░░░██░░░░░░░██░░░██░██░░░██░░░░░░░░██░██░░░██░██░░░░░██████░██░░██░░░░░░██░██░░░░░██████░░░██░░██░░░██░░░░░██░░██░░░██░░░██░░░░░██░░░██░██░░░░░██░░██░░██░░░░░░░░░░██\n██░░██░██░░██░▀█████▀░░░██░░██░██████░░░██░░██░▀█████▀░▀█████░██░░░██░░░░██░░░░▀█████░░░██░░░██░▀█████▀░░░██████▀░▀█████▀░██░░░░░██░░██░█████▀░██████▀░▀█████░░░░░░░░░░█████▀░░░██░░░░░██░░██░██████░▀█████░██░░░██░▀█████░▀███▀░░░▀█████░██████▀\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░","width":2540},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[1152,160],"id":"800b9406-dafd-4e0b-b956-61493f40dc13","name":"Sticky Note4"}],"connections":{"Aggregate1":{"main":[[{"node":"Summarize1","type":"main","index":0}]]},"Extract from Excel":{"main":[[{"node":"Aggregate1","type":"main","index":0}]]},"Set File ID":{"main":[[{"node":"If","type":"main","index":0}]]},"Delete Old Doc Rows":{"main":[[{"node":"Limit","type":"main","index":0}]]},"Download File":{"main":[[{"node":"Loop Over Items1","type":"main","index":0}]]},"Convert to Google Doc1":{"main":[[{"node":"Delete File","type":"main","index":0}]]},"If":{"main":[[],[{"node":"Delete Old Doc Rows","type":"main","index":0}]]},"Set File ID1":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Download File1":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Aggregate":{"main":[[{"node":"Summarize","type":"main","index":0}]]},"Extract from Excel1":{"main":[[{"node":"Aggregate","type":"main","index":0}]]},"Convert to Google Doc2":{"main":[[{"node":"Delete File1","type":"main","index":0}]]},"Extract PDF Text":{"main":[[{"node":"Insert into Supabase Vectorstore1","type":"main","index":0}]]},"Summarize1":{"main":[[{"node":"Insert into Supabase Vectorstore1","type":"main","index":0}]]},"Summarize":{"main":[[{"node":"Insert into Supabase Vectorstore","type":"main","index":0}]]},"Recursive Character Text Splitter":{"ai_textSplitter":[[{"node":"Enhanced Default Data Loader1","type":"ai_textSplitter","index":0}]]},"Embeddings OpenAI1":{"ai_embedding":[[{"node":"Insert into Supabase Vectorstore1","type":"ai_embedding","index":0}]]},"Recursive Character Text Splitter1":{"ai_textSplitter":[[{"node":"Enhanced Default Data Loader2","type":"ai_textSplitter","index":0}]]},"Embeddings OpenAI2":{"ai_embedding":[[{"node":"Insert into Supabase Vectorstore","type":"ai_embedding","index":0}]]},"Extract PDF Text1":{"main":[[{"node":"Insert into Supabase Vectorstore","type":"main","index":0}]]},"Loop Over Items":{"main":[[{"node":"Switch2","type":"main","index":0}],[{"node":"Download File1","type":"main","index":0}]]},"Enhanced Default Data Loader1":{"ai_document":[[{"node":"Insert into Supabase Vectorstore1","type":"ai_document","index":0}]]},"Enhanced Default Data Loader2":{"ai_document":[[{"node":"Insert into Supabase Vectorstore","type":"ai_document","index":0}]]},"Loop Over Items1":{"main":[[{"node":"Switch","type":"main","index":0}],[{"node":"Download File","type":"main","index":0}]]},"File Created":{"main":[[{"node":"Set File ID1","type":"main","index":0}]]},"File Updated":{"main":[[{"node":"Set File ID","type":"main","index":0}]]},"Extract from Text File":{"main":[[{"node":"Insert into Supabase Vectorstore1","type":"main","index":0}]]},"Switch":{"main":[[{"node":"Extract PDF Text1","type":"main","index":0}],[{"node":"Extract from Text File1","type":"main","index":0}],[{"node":"Extract from Excel1","type":"main","index":0}],[{"node":"Convert to Google Doc2","type":"main","index":0}],[{"node":"Convert to Google Doc2","type":"main","index":0}],[{"node":"Convert to Google Doc2","type":"main","index":0}]]},"Extract from Text File1":{"main":[[{"node":"Insert into Supabase Vectorstore","type":"main","index":0}]]},"Limit":{"main":[[{"node":"Set Version","type":"main","index":0}]]},"When chat message received":{"main":[[{"node":"Agente RAF","type":"main","index":0}]]},"Postgres Chat Memory":{"ai_memory":[[{"node":"Agente RAF","type":"ai_memory","index":0}]]},"Vector Store Tool":{"ai_tool":[[{"node":"Agente RAF","type":"ai_tool","index":0}]]},"Embeddings OpenAI":{"ai_embedding":[[{"node":"Supabase Vector Store","type":"ai_embedding","index":0}]]},"Supabase Vector Store":{"ai_vectorStore":[[{"node":"Vector Store Tool","type":"ai_vectorStore","index":0}]]},"Switch2":{"main":[[{"node":"Extract PDF Text","type":"main","index":0}],[{"node":"Extract from Text File","type":"main","index":0}],[{"node":"Extract from Excel","type":"main","index":0}],[{"node":"Convert to Google Doc1","type":"main","index":0}],[{"node":"Convert to Google Doc1","type":"main","index":0}],[{"node":"Convert to Google Doc1","type":"main","index":0}]]},"Set Version":{"main":[[{"node":"Loop Over Items1","type":"main","index":0}]]},"GPT-4O-mini":{"ai_languageModel":[[{"node":"Agente RAF","type":"ai_languageModel","index":0}]]},"GPT 4o-min":{"ai_languageModel":[[{"node":"Vector Store Tool","type":"ai_languageModel","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"aff9a661-6e72-4d81-87ba-b3ab98993764","triggerCount":0,"tags":[]}