{"createdAt":"2025-07-28T22:43:49.462Z","updatedAt":"2025-07-29T10:16:40.322Z","id":"HvVVUofo63hrdjzD","name":"Social Media - Journal - Mia","active":false,"isArchived":true,"nodes":[{"parameters":{"httpRequestMethod":"POST","graphApiVersion":"v20.0","node":"={{ $json.instagram_business_account_id }}","edge":"media","options":{"queryParameters":{"parameter":[{"name":"image_url","value":"={{ $json.image_url }}"},{"name":"caption","value":"={{ $json.instagram_post_caption }}"}]}}},"id":"e64f7423-7875-4af3-86c0-601b837deafa","name":"Instagram prepare media","type":"n8n-nodes-base.facebookGraphApi","position":[-176,1728],"typeVersion":1,"credentials":{"facebookGraphApi":{"id":"k3HCbWva6dIScPmJ","name":"Facebook Graph account 2"}}},{"parameters":{"httpRequestMethod":"POST","graphApiVersion":"v20.0","node":"={{ $('Instagram params').item.json.instagram_business_account_id }}","edge":"media_publish","options":{"queryParameters":{"parameter":[{"name":"creation_id","value":"={{ $json.id }}"}]}}},"id":"6d5c4fc1-a5b7-4fc9-a042-95a15fb1f226","name":"Instagram publish media","type":"n8n-nodes-base.facebookGraphApi","position":[352,1648],"typeVersion":1,"credentials":{"facebookGraphApi":{"id":"k3HCbWva6dIScPmJ","name":"Facebook Graph account 2"}}},{"parameters":{"content":"Add your credential","height":430.4091991661993,"width":1329.8249455924943},"id":"345eb67c-22d8-4da7-b4f8-4e26a83af960","name":"Sticky Note1","type":"n8n-nodes-base.stickyNote","position":[-224,1584],"typeVersion":1},{"parameters":{"assignments":{"assignments":[{"id":"225df266-bf29-4415-b04c-2750cef4506a","name":"image_url","type":"string","value":"={{ $json.imagem_url }}"},{"id":"1e380c14-e908-4eeb-90e0-957a422829d0","name":"instagram_business_account_id","type":"string","value":"17841475443525557"},{"id":"f35e3093-1bff-4cc6-a6c4-909dca314cc7","name":"instagram_post_caption","type":"string","value":"={{ $json.legenda }}"}]},"options":{}},"id":"414a85d4-a06f-4375-88df-60c61b6975a8","name":"Instagram params","type":"n8n-nodes-base.set","position":[-384,1728],"typeVersion":3.4},{"parameters":{"graphApiVersion":"v20.0","node":"=me","options":{"fields":{"field":[{"name":"name"},{"name":"connected_instagram_account"}]}}},"id":"95b6b48f-510f-46d6-9e3d-0e17324ae6f7","name":"Node just for retrive id of instagram page","type":"n8n-nodes-base.facebookGraphApi","position":[-416,1376],"typeVersion":1,"credentials":{"facebookGraphApi":{"id":"k3HCbWva6dIScPmJ","name":"Facebook Graph account 2"}},"disabled":true},{"parameters":{"content":"You can use this node if you want to retrieve the instagram id. \n\nAdd it to the workflow ore use manually","height":289,"width":318},"id":"03df19bf-7cbf-4dbd-8243-84e6ddac8e9c","name":"Sticky Note2","type":"n8n-nodes-base.stickyNote","position":[-528,1264],"typeVersion":1},{"parameters":{"content":"Here we have all parameters for posting in instagram image url, caption and instagram business profile id","height":310,"width":188,"color":3},"id":"d6ae8665-4d34-4ea4-a3e6-ab887e4be4e3","name":"Sticky Note3","type":"n8n-nodes-base.stickyNote","position":[-432,1584],"typeVersion":1},{"parameters":{"content":"## Permissions\nPublishing relies on a combination of the following permissions. The exact combination depends on which endpoints your app uses. Refer to our endpoint references to determine which permissions each endpoint requires.\n\nads_management\nbusiness_management\ninstagram_basic\ninstagram_content_publish\npages_read_engagement\nIf your app will be used by app users who do not have a role on your app or a role in a Business that has claimed your app, you must request approval for each permission via App Review before non-role app users can grant them to your app.\n\n## Limitations\nJPEG is the only image format supported. Extended JPEG formats such as MPO and JPS are not supported.\nShopping tags are not supported.\nBranded content tags are not supported.\nFilters are not supported.\nPublishing to Instagram TV is not supported.\nFor additional limitations, refer to each endpoint's reference.\n\n## Rate Limit\nInstagram accounts are limited to 50 API-published posts within a rolling 24-hour period. Carousels count as a single post. This limit is enforced on the POST /{ig-user-id}/media_publish endpoint when attempting to publish a media container. We recommend that your app also enforce the publishing rate limit, especially if your app allows app users to schedule posts to be published in the future.\n\nTo check an Instagram Professional account's current rate limit usage, query the GET /{ig-user-id}/content_publishing_limit endpoint.","height":792,"width":439.10253951549294,"color":7},"id":"b47968c0-0d14-4cee-bad1-f2386a52e2db","name":"Sticky Note4","type":"n8n-nodes-base.stickyNote","position":[-688,1904],"typeVersion":1},{"parameters":{"graphApiVersion":"v20.0","node":"={{ $json.id }}","options":{"fields":{"field":[{"name":"id"},{"name":"status"},{"name":"status_code"}]}}},"id":"f4453899-d5ac-4c19-a58b-1e0c59698ed7","name":"Instagram check status of media uploaded before","type":"n8n-nodes-base.facebookGraphApi","position":[0,1728],"typeVersion":1,"credentials":{"facebookGraphApi":{"id":"k3HCbWva6dIScPmJ","name":"Facebook Graph account 2"}}},{"parameters":{"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"id":"0304efee-33b2-499e-bad1-9238c1fc2999","operator":{"name":"filter.operator.equals","type":"string","operation":"equals"},"leftValue":"={{ $json.status_code }}","rightValue":"FINISHED"}]},"options":{}},"id":"398c5584-184d-4d40-8597-9d3e6d9540cb","name":"If media status is finished","type":"n8n-nodes-base.if","position":[160,1728],"typeVersion":2.2},{"parameters":{"graphApiVersion":"v20.0","node":"={{ $('Instagram check status of media uploaded before').item.json.id }}","options":{"fields":{"field":[{"name":"id"},{"name":"status"},{"name":"status_code"}]}}},"id":"cc9ac031-fa7b-4cb4-b0fc-5ac83176c202","name":"Instagram check status of media published before","type":"n8n-nodes-base.facebookGraphApi","position":[560,1648],"typeVersion":1,"credentials":{"facebookGraphApi":{"id":"k3HCbWva6dIScPmJ","name":"Facebook Graph account 2"}}},{"parameters":{"conditions":{"options":{"version":2,"leftValue":"","caseSensitive":true,"typeValidation":"strict"},"combinator":"and","conditions":[{"id":"0304efee-33b2-499e-bad1-9238c1fc2999","operator":{"name":"filter.operator.equals","type":"string","operation":"equals"},"leftValue":"={{ $json.status_code }}","rightValue":"PUBLISHED"}]},"options":{}},"id":"21932012-5950-49e0-b251-1230c9952924","name":"If media status is finished1","type":"n8n-nodes-base.if","position":[752,1648],"typeVersion":2.2},{"parameters":{"content":"You can send email for unsuccessful upload or what you want, you can trigger another workflow or another node","height":102.11100456713636,"color":3},"id":"a91badad-3d0f-46bb-b3b7-e44d69ef5c90","name":"Sticky Note5","type":"n8n-nodes-base.stickyNote","position":[304,2032],"typeVersion":1},{"parameters":{"content":"You can send email for unsuccessful publishing or what you want, you can trigger another workflow or another node","height":112.31608359812239,"color":3},"id":"ce8f28ec-b8db-4c14-92e2-d76e96ff52a8","name":"Sticky Note7","type":"n8n-nodes-base.stickyNote","position":[1152,1776],"typeVersion":1},{"parameters":{"content":"You can send email for successfull publishing or what you want, you can trigger another workflow or another node","height":112.31608359812239,"color":3},"id":"e6392372-7634-43bc-98b8-360ee7d017cd","name":"Sticky Note8","type":"n8n-nodes-base.stickyNote","position":[1152,1616],"typeVersion":1},{"parameters":{"url":"https://feeds.folha.uol.com.br/mercado/rss091.xml","options":{}},"type":"n8n-nodes-base.rssFeedRead","typeVersion":1.2,"position":[-7344,912],"id":"63d23e72-2fcf-46c5-8a69-8cfccf538ae1","name":"RSS Folha"},{"parameters":{"url":"https://br.investing.com/rss/news_301.rss","options":{}},"type":"n8n-nodes-base.rssFeedRead","typeVersion":1.2,"position":[-7344,720],"id":"d17dab6f-fc29-4ba9-b01c-8a874304705a","name":"RSS Investing"},{"parameters":{"url":"https://metroquadrado.com/feed","options":{}},"type":"n8n-nodes-base.rssFeedRead","typeVersion":1.2,"position":[-7344,1104],"id":"a0f3404d-2f2a-4125-b3b3-6fa433f2ca99","name":"RSS Metro Quadrado"},{"parameters":{"rule":{"interval":[{"triggerAtHour":18}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[-7840,912],"id":"58eeae75-ec80-4519-91da-422d499b7042","name":"Schedule Trigger"},{"parameters":{},"type":"n8n-nodes-base.noOp","typeVersion":1,"position":[-7584,912],"id":"6b08e0dc-11b0-40a0-91e6-5e1b51ff8c8b","name":"No Operation, do nothing"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenRouter","typeVersion":1,"position":[-4176,1072],"id":"5aa6b470-9133-4d9e-be36-0d7d11824aaf","name":"OpenRouter Chat Model","credentials":{"openRouterApi":{"id":"o1ywdYlH64cgqSMT","name":"OpenRouter account"}}},{"parameters":{"mode":"runOnceForEachItem","jsCode":"const binaryData = $input.item.binary?.[\"imagem_final\"];\n\nif (!binaryData || !binaryData.data) {\n  throw new Error(\"Campo 'imagem_final' não encontrado no binário.\");\n}\n\nconst base64 = Buffer.from(binaryData.data, 'base64').toString(\"base64\");\n\nreturn {\n  json: {\n    base64Image: base64\n  }\n};\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-2576,768],"id":"9b511ca5-e6ab-4124-90af-1720f2f5a80f","name":"Binary > base64"},{"parameters":{"operation":"createFromText","content":"={{ $json.base64Image }}","name":"={{$json[\"arquivo_base64\"]}}","driveId":{"__rl":true,"value":"My Drive","mode":"list","cachedResultName":"My Drive","cachedResultUrl":"https://drive.google.com/drive/my-drive"},"folderId":{"__rl":true,"value":"1-TqSloGeJhKGhoDNe9bI6jhDmRcH0KAM","mode":"list","cachedResultName":"base64","cachedResultUrl":"https://drive.google.com/drive/folders/1-TqSloGeJhKGhoDNe9bI6jhDmRcH0KAM"},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[-1552,848],"id":"5ee36edf-0649-4aad-aba8-3284bf5addc0","name":"Create file from text","credentials":{"googleDriveOAuth2Api":{"id":"ZkmaJh5Y8Zdz8ju7","name":"Google Drive - lucas@getmia.com.br"}}},{"parameters":{"pollTimes":{"item":[{"mode":"everyMinute"}]},"documentId":{"__rl":true,"value":"1fWo0JNzTrseQubx5O31tEJ5Yd4jHKUCGp_9xZMPfec0","mode":"list","cachedResultName":"Controle Journal","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1fWo0JNzTrseQubx5O31tEJ5Yd4jHKUCGp_9xZMPfec0/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"base","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1fWo0JNzTrseQubx5O31tEJ5Yd4jHKUCGp_9xZMPfec0/edit#gid=0"},"event":"rowUpdate","options":{"columnsToWatch":["status"]}},"type":"n8n-nodes-base.googleSheetsTrigger","typeVersion":1,"position":[-912,1744],"id":"ae482ad5-1b46-42f1-9da1-7db7a96ad9b8","name":"Google Sheets Trigger","credentials":{"googleSheetsTriggerOAuth2Api":{"id":"PvlXorOaq6vxhcle","name":"Google Sheets Trigger account"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"54fa4546-8262-4651-9b0e-ce3a2f66416f","leftValue":"={{ $json.status }}","rightValue":"aprovado","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-704,1744],"id":"7d01dcb2-a785-40cd-ab3e-01e8d268e497","name":"If8"},{"parameters":{"sendTo":"lucas@getmia.com.br","subject":"Post Finamob falhou!","message":"Post Finamob falhou!","options":{},"path":"94ddf732-e59f-44dc-ab60-86eedd7c26b6"},"type":"n8n-nodes-base.gmail","typeVersion":2.1,"position":[352,1856],"id":"74a20105-4f4d-48e1-902e-a83cde5702df","name":"Send a message","webhookId":"94ddf732-e59f-44dc-ab60-86eedd7c26b6","credentials":{"gmailOAuth2":{"id":"nSkQlWbOu4FNRL2N","name":"Gmail - lucas@getmia.com.br"}}},{"parameters":{"sendTo":"lucas@getmia.com.br","subject":"Post Finamob deu certo!","message":"Post Finamob deu certo!","options":{},"path":"4f2e3820-1b0f-437d-8d02-03cc85b940d7"},"type":"n8n-nodes-base.gmail","typeVersion":2.1,"position":[976,1616],"id":"0f7f1cd8-db7f-45fa-b267-68bf2f3f79b6","name":"Send a message1","webhookId":"4f2e3820-1b0f-437d-8d02-03cc85b940d7","credentials":{"gmailOAuth2":{"id":"nSkQlWbOu4FNRL2N","name":"Gmail - lucas@getmia.com.br"}}},{"parameters":{"sendTo":"lucas@getmia.com.br","subject":"Post Finamob falhou 2!","message":"Post Finamob falhou 2!","options":{},"path":"fd4de1c6-469b-42f6-a399-bc0fdafef777"},"type":"n8n-nodes-base.gmail","typeVersion":2.1,"position":[976,1792],"id":"fa1e0e68-034a-477a-b257-07df8eddef05","name":"Send a message2","webhookId":"fd4de1c6-469b-42f6-a399-bc0fdafef777","credentials":{"gmailOAuth2":{"id":"nSkQlWbOu4FNRL2N","name":"Gmail - lucas@getmia.com.br"}}},{"parameters":{"content":"# Portais de notícias\n\n### Portais de notícias que o fluxo irá consultar para gerar os posts","height":816,"width":1072},"type":"n8n-nodes-base.stickyNote","position":[-7648,544],"typeVersion":1,"id":"5ab796e8-6840-4487-80df-820440fc0ce4","name":"Sticky Note"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"e201d72c-d4e6-4a9e-a07e-782cf5a39960","leftValue":"={{ new Date($json[\"pubDate\"]) }}","rightValue":"={{ new Date(Date.now() - 24 * 60 * 60 * 1000) }}","operator":{"type":"dateTime","operation":"after"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-7136,1104],"id":"d810aa27-c23f-42ae-9161-dd2fbf960b72","name":"Filtro de data da notícia 3"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"e201d72c-d4e6-4a9e-a07e-782cf5a39960","leftValue":"={{ new Date($json[\"pubDate\"]) }}","rightValue":"={{ new Date(Date.now() - 24 * 60 * 60 * 1000) }}","operator":{"type":"dateTime","operation":"after"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-7136,912],"id":"89d5a28a-3040-47cd-aa5d-0b28893927f5","name":"Filtro de data da notícia 2"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"e201d72c-d4e6-4a9e-a07e-782cf5a39960","leftValue":"={{ new Date($json[\"pubDate\"]) }}","rightValue":"={{ new Date(Date.now() - 24 * 60 * 60 * 1000) }}","operator":{"type":"dateTime","operation":"after"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-7136,720],"id":"0e99ea0e-76a4-4b61-8c49-21bec03398b1","name":"Filtro de data da notícia 1"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"1e4edfc7-f562-40cd-8253-35b4e8bac0b8","leftValue":"={{ \n[\n  \"imovel\", \"imoveis\",\n  \"imobiliario\", \"imobiliarios\",\n  \"apartamento\", \"apartamentos\",\n  \"aluguel\", \"aluguéis\",\n  \"compra\", \"compras\",\n  \"venda\", \"vendas\",\n  \"locacao\", \"locacoes\",\n  \"casa\", \"casas\",\n  \"construtora\", \"construtoras\",\n  \"incorporacao\", \"incorporacoes\",\n  \"condominio\", \"condominios\",\n  \"empreendimento\", \"empreendimentos\"\n].some(palavra =>\n  ($json.title || '').toLowerCase().includes(palavra) ||\n  ($json['content:encoded'] || '').toLowerCase().includes(palavra)\n)\n}}","rightValue":"true","operator":{"type":"boolean","operation":"true","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-6848,704],"id":"c546f3cc-1aa5-43ec-b11d-4e71fb8dfd7c","name":"Filtro de tema imobiliário 1"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"1e4edfc7-f562-40cd-8253-35b4e8bac0b8","leftValue":"={{ \n[\n  \"imovel\", \"imoveis\",\n  \"imobiliario\", \"imobiliarios\",\n  \"apartamento\", \"apartamentos\",\n  \"aluguel\", \"aluguéis\",\n  \"compra\", \"compras\",\n  \"venda\", \"vendas\",\n  \"locacao\", \"locacoes\",\n  \"casa\", \"casas\",\n  \"construtora\", \"construtoras\",\n  \"incorporacao\", \"incorporacoes\",\n  \"condominio\", \"condominios\",\n  \"empreendimento\", \"empreendimentos\"\n].some(palavra =>\n  ($json.title || '').toLowerCase().includes(palavra) ||\n  ($json['content:encoded'] || '').toLowerCase().includes(palavra)\n)\n}}","rightValue":"true","operator":{"type":"boolean","operation":"true","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-6848,896],"id":"0f2bd238-4f6f-4c53-b36f-75b0d824994b","name":"Filtro de tema imobiliário 2"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"1e4edfc7-f562-40cd-8253-35b4e8bac0b8","leftValue":"={{ \n[\n  \"imovel\", \"imoveis\",\n  \"imobiliario\", \"imobiliarios\",\n  \"apartamento\", \"apartamentos\",\n  \"aluguel\", \"aluguéis\",\n  \"compra\", \"compras\",\n  \"venda\", \"vendas\",\n  \"locacao\", \"locacoes\",\n  \"casa\", \"casas\",\n  \"construtora\", \"construtoras\",\n  \"incorporacao\", \"incorporacoes\",\n  \"condominio\", \"condominios\",\n  \"empreendimento\", \"empreendimentos\"\n].some(palavra =>\n  ($json.title || '').toLowerCase().includes(palavra) ||\n  ($json['content:encoded'] || '').toLowerCase().includes(palavra)\n)\n}}","rightValue":"true","operator":{"type":"boolean","operation":"true","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-6848,1088],"id":"13f5bba0-77c0-4403-8f70-18613683ab4e","name":"Filtro de tema imobiliário 3"},{"parameters":{"numberInputs":3},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[-6480,880],"id":"6112c83b-eae2-4bd4-afcd-51274cc62bab","name":"Notícias Consolidadas"},{"parameters":{"mode":"runOnceForEachItem","jsCode":"// Coloque os possíveis campos que podem trazer a imagem direto do RSS\nconst possiveisCampos = [\n  $json['media:content']?.url,\n  $json['enclosure']?.url,\n  $json['image'],\n  $json['og:image']\n];\nconst imagemDireta = possiveisCampos.find(x => !!x);\n\nreturn {\n  ...$json,\n  imagem: imagemDireta || '' // Se não tiver, deixa vazio\n};\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-6256,896],"id":"5bf11bb6-0915-451c-98ed-e80200eb2ae2","name":"Padronização do campo imagem","onError":"continueRegularOutput"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"b5d79643-ef81-4cef-b02d-371990a64543","leftValue":"={{ $json.imagem }}","rightValue":"","operator":{"type":"string","operation":"empty","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-6048,896],"id":"ed9c0fda-ca6a-4ae9-9be8-628613682f1d","name":"Validação do campo imagem"},{"parameters":{"mode":"runOnceForEachItem","jsCode":"return {\n  ...$json,\n  original: $json // salva todos os dados da notícia\n};\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-5792,768],"id":"adc116c9-f6ea-40d7-bc72-dff591905fcb","name":"Backup dados da notícia"},{"parameters":{"url":"={{ $json.link }}","sendHeaders":true,"headerParameters":{"parameters":[{"name":"User-Agent","value":"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-5568,768],"id":"0b420e6f-5912-421a-8608-2600c276782c","name":"Buscar HTML da notícia","onError":"continueRegularOutput"},{"parameters":{"mode":"runOnceForEachItem","jsCode":"const html = $json.data || $json.body || '';\nconst ogImageMatch = html.match(/<meta\\s+property=[\"']og:image[\"']\\s+content=[\"']([^\"']+)[\"']/i);\nlet imagem = ogImageMatch ? ogImageMatch[1] : '';\n\nif (!imagem) {\n  const imgMatch = html.match(/<img[^>]+src=[\"']([^\"']+)[\"']/i);\n  if (imgMatch) {\n    imagem = imgMatch[1];\n  }\n}\n\n// Traz de volta todos os campos da notícia original, mais o campo 'imagem'\nreturn {\n  ...($('Backup dados da notícia').item.json.original || {}), // todos os campos originais\n  imagem                    // novo campo imagem atualizado\n};\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-5328,768],"id":"27740eb7-0996-4339-a3bf-34ea0edd1b92","name":"Extrair imagem do HTML","onError":"continueRegularOutput"},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"05295fc0-aca6-433a-a239-c5d8ed4fc011","leftValue":"={{ $json.imagem }}","rightValue":"","operator":{"type":"string","operation":"empty","singleValue":true}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[-5104,768],"id":"d53f442d-5287-4b58-958b-ab59c491394f","name":"Imagem encontrada?"},{"parameters":{"resource":"image","prompt":"=Gere uma imagem moderna e realista sobre o seguinte tema imobiliário:\n[{{ $json.title }}]\n\nA imagem deve ser de alta qualidade, chamativa, ideal para um post profissional no Instagram. Não inclua textos na imagem.\n","options":{"returnImageUrls":true}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[-4864,656],"id":"809f4d01-4209-4d70-aadb-8df675e54f82","name":"Gerar imagem com IA","credentials":{"openAiApi":{"id":"GLHn0uXL8dRQAYuS","name":"OpenAi account"}},"onError":"continueRegularOutput"},{"parameters":{"jsCode":"const html = $json.data || $json.body || '';\nconst ogImageMatch = html.match(/<meta\\s+property=[\"']og:image[\"']\\s+content=[\"']([^\"']+)[\"']/i);\nlet imagem = ogImageMatch ? ogImageMatch[1] : '';\n\nif (!imagem) {\n  const imgMatch = html.match(/<img[^>]+src=[\"']([^\"']+)[\"']/i);\n  if (imgMatch) {\n    imagem = imgMatch[1];\n  }\n}\n\n// Recupera os campos originais da notícia de 'Code3'\nreturn {\n  ...($('Backup dados da notícia').item.json.original || {}),\n  imagem: $input.first().json.url // campo imagem atualizado com o link retornado pela OpenAI\n};\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-4656,656],"id":"4b8cd525-a9c6-43cf-97c3-1b15e20d26d4","name":"Salvar imagem gerada"},{"parameters":{"numberInputs":3},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[-4464,864],"id":"da80d270-d0da-42ed-88aa-9375b4f5413c","name":"Unificar imagem final"},{"parameters":{"content":"# Definição da Imagem do Post\n\n### Primeiro busca imagem na notícia, se não encontra gera uma via IA","height":816,"width":2032},"type":"n8n-nodes-base.stickyNote","position":[-6336,544],"typeVersion":1,"id":"72926884-70ad-47c6-a717-00aa7bcfe4f9","name":"Sticky Note6"},{"parameters":{"content":"# Custos totais da Infra + Manut.\n\n### VPS - BRL 60 / mês\n### Open Router e Open AI API - USD 25 / month\n### hcti.io - HTML/CSS to Image API - USD 14 / month\n### Evolution API - BRL 40 / mês\n### Conta Google - BRL 60 / mês\n### Manutenção e melhorias - BRL 500 / mês\n\n## Total ~ 900 / mês","height":528,"width":560,"color":3},"type":"n8n-nodes-base.stickyNote","position":[-8272,272],"typeVersion":1,"id":"baeec7a6-e3f2-4222-8b56-dcd304d24d1a","name":"Sticky Note9"},{"parameters":{"promptType":"define","text":"=Você é um social media especialista e autoridade em conteúdo imobiliário no Instagram. Sua comunicação é inovadora, criativa, personalizada e respeitada no setor — profissionais como incorporadores, construtores e financiadores acompanham suas publicações para se manter informados e inspirados.\n\nVocê recebe uma lista de notícias (que pode conter itens repetidos de diferentes fontes).\n\nSua missão:\n\nAnalise e compreenda profundamente todas as notícias.\n\nElimine notícias duplicadas ou demasiadamente semelhantes (mesmo tema ou conteúdo).\n\nPara cada notícia única, crie um título original, criativo e curto (até 10 palavras), nunca copiando o título publicado pelos portais.\n\nPara cada notícia única, crie uma legenda envolvente, informativa e de até 300 caracteres, pronta para Instagram:\n\nUse ganchos persuasivos e linguagem acessível para captar a atenção desde o início.\n\nBaseie-se no contexto, novidade, tendência ou oportunidade que a notícia traz para o setor.\n\nNo final da legenda, inclua sempre um CTA estimulando comentários, compartilhamentos ou novos seguidores — adapte o CTA conforme a natureza da notícia, mostrando autoridade e incentivando engajamento genuíno.\n\nAo encerrar, inclua a fonte da notícia e o respectivo link.\n\nRetorne no seguinte formato JSON:\n\n[\n  {\n    \"titulo\": \"Seu título original aqui\",\n    \"legenda\": \"Sua legenda envolvente aqui, CTA final. Fonte: [link]\",\n    \"imagem\": \"{{ $json.imagem }}\",\n    \"fonte\": \"{{ $json.link }}\"\n  }\n]\n\nGaranta que cada item do array corresponde a uma notícia realmente única, com título e legenda originais, prontos para capturar e engajar o público do Instagram imobiliário.\n\nCaso queira incluir sugestões de hashtags, ou regras adicionais (ex: adaptação do tom de voz conforme categoria), basta pedir que posso complementar!\n\nLista de notícias:\nLink: {{ $json.link }}\nTitulo: {{ $json.title }}\nConteudo: {{ $json.content }}\nConteudo2: {{ $json.contentSnippet }}\n\nRetorne diretamente como JSON válido (não como string). Sem aspas no array completo.\n\nNa legenda, utilize \"\\n\\n\" para representar quebras de linha, separando claramente os blocos de conteúdo (gancho, contexto, CTA e fonte).","options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.1,"position":[-4176,880],"id":"17bad793-53c7-4811-b2f6-62c22587018c","name":"AI Agent - Estrutura dos Posts","onError":"continueRegularOutput"},{"parameters":{"jsCode":"const allNoticias = items.flatMap(item => JSON.parse(item.json.output));\n\nreturn allNoticias.map((noticia, index) => {\n  return {\n    json: {\n      ...noticia\n    }\n  };\n});\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-3776,880],"id":"e9f6e3b7-3872-40e3-9fa5-7ca99f7d21d0","name":"Estruturação do JSON de saída","onError":"continueRegularOutput"},{"parameters":{"assignments":{"assignments":[{"id":"6cb1827b-7e9b-4c1d-9553-704a28bc6cff","name":"html","value":"=<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"UTF-8\" />\n  <style>\n    * {\n      margin: 0;\n      padding: 0;\n      box-sizing: border-box;\n    }\n\n    html, body {\n      width: 1080px;\n      height: 1080px;\n      overflow: hidden;\n      background: black;\n      font-family: Arial, sans-serif;\n    }\n\n    .container {\n      position: relative;\n      width: 1080px;\n      height: 1080px;\n      background-image: url(\"{{$json['imagem']}}\");\n      background-size: cover;\n      background-position: center center;\n      background-repeat: no-repeat;\n    }\n\n    .overlay-gradient {\n      position: absolute;\n      bottom: 0;\n      left: 0;\n      width: 100%;\n      height: 40%;\n      background: linear-gradient(to top, rgba(0,0,0,0.85), transparent);\n      z-index: 1;\n    }\n\n    .logo {\n      position: absolute;\n      top: 40px;\n      right: 40px;\n      width: 120px;\n      z-index: 2;\n    }\n\n    .text-block {\n      position: absolute;\n      bottom: 40px;\n      left: 40px;\n      z-index: 2;\n      color: white;\n    }\n\n    .text-block h4 {\n      margin: 0 0 10px 0;\n      font-size: 28px;\n      font-weight: normal;\n      color: #ccc;\n    }\n\n    .text-block h2 {\n      margin: 0;\n      font-size: 48px;\n      font-weight: bold;\n      line-height: 1.2;\n    }\n  </style>\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"overlay-gradient\"></div>\n    <img class=\"logo\" src=\"https://escoladomercadoimobiliario.com.br/wp-content/uploads/2025/02/Group-1171276103.svg\" />\n    <div class=\"text-block\">\n      <h4>MERCADO</h4>\n      <h2>{{$json[\"titulo\"]}}</h2>\n    </div>\n  </div>\n</body>\n</html>\n","type":"string"}]},"includeOtherFields":true,"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-3488,880],"id":"96b9f097-8243-46dc-8863-55559d6d6f9b","name":"Criação do HTML da Imagem"},{"parameters":{"content":"# Estruturação dos Posts\n\n### Lógica para definir estrutura dos posts. Escolhe o que é mais relevante e reescreve título, legenda e prepara JSON para etapas seguintes.","height":816,"width":624},"type":"n8n-nodes-base.stickyNote","position":[-4240,544],"typeVersion":1,"id":"200bc7f9-ed99-4609-b04c-f9dff5b907f4","name":"Sticky Note10"},{"parameters":{"content":"# Edição das Imagens\n\n### Todas as transformações necessárias para ter a imagem final. \n### Publicação da imagem no Github, geração do link público da imagem e transformação para base64 (para envio no whatsapp).","height":1072,"width":1232},"type":"n8n-nodes-base.stickyNote","position":[-3568,288],"typeVersion":1,"id":"8d0be6e1-9792-4f79-bd00-a1c4a0b813bc","name":"Sticky Note11"},{"parameters":{"method":"POST","url":"https://hcti.io/v1/image","sendHeaders":true,"headerParameters":{"parameters":[{"name":"Content-Type","value":"application/json"},{"name":"Authorization","value":"Basic MDRlZDA4NWYtYmY0OS00MzIyLWExMzEtMzY3ZjA1YmRiOTllOmQ0MzhjODk3LTVlYzctNGMyNS1iMjM0LWY5NGYyNjc1OGRhYQ=="}]},"sendBody":true,"bodyParameters":{"parameters":[{"name":"html","value":"={{ $json.html }}"}]},"options":{"response":{"response":{"responseFormat":"json"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-3264,624],"id":"48301617-31dd-4c1b-bece-724bb370e916","name":"HTML > Imagem","alwaysOutputData":true,"onError":"continueRegularOutput"},{"parameters":{"url":"={{ $json.url }}","options":{"response":{"response":{"responseFormat":"file","outputPropertyName":"imagem_final"}}}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[-3056,624],"id":"6859149d-e46d-4d5b-8db3-3d981b1fabdd","name":"Baixar imagem"},{"parameters":{"operation":"crop","dataPropertyName":"imagem_final","width":1080,"height":1080,"options":{"format":"jpeg"}},"type":"n8n-nodes-base.editImage","typeVersion":1,"position":[-2848,624],"id":"bd9627e8-f78a-43cd-b4ba-d7d4e5c0b292","name":"Cortar imagem 1080x1080"},{"parameters":{"resource":"file","owner":{"__rl":true,"value":"getmia","mode":"list","cachedResultName":"getmia","cachedResultUrl":"https://github.com/getmia"},"repository":{"__rl":true,"value":"miabuilder-images","mode":"list","cachedResultName":"miabuilder-images","cachedResultUrl":"https://github.com/getmia/miabuilder-images"},"filePath":"=images/{{$now.toFormat(\"yyyyMMddHHmmssSSS\")}}.jpg","binaryData":true,"binaryPropertyName":"imagem_final","commitMessage":"Adicionando imagem via n8n","path":"d503d839-06ba-4f63-a0a3-456a3e266885"},"type":"n8n-nodes-base.github","typeVersion":1.1,"position":[-2576,496],"id":"a0f70d92-3d8b-42c0-9d9a-3100db85df23","name":"Salvar imagem no GitHub","webhookId":"d503d839-06ba-4f63-a0a3-456a3e266885","credentials":{"githubApi":{"id":"Gd4bGzglU6thixeI","name":"GitHub account"}}},{"parameters":{"mode":"combine","combineBy":"combineByPosition","numberInputs":3,"options":{}},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[-2208,832],"id":"0e4f22bb-4d2d-4190-b74b-3e972c4bf166","name":"Dados + Imagem Final","onError":"continueRegularOutput"},{"parameters":{"operation":"append","documentId":{"__rl":true,"value":"1fWo0JNzTrseQubx5O31tEJ5Yd4jHKUCGp_9xZMPfec0","mode":"list","cachedResultName":"Controle Journal","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1fWo0JNzTrseQubx5O31tEJ5Yd4jHKUCGp_9xZMPfec0/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"base","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1fWo0JNzTrseQubx5O31tEJ5Yd4jHKUCGp_9xZMPfec0/edit#gid=0"},"columns":{"mappingMode":"autoMapInputData","value":{},"matchingColumns":[],"schema":[{"id":"noticia_id","displayName":"noticia_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"titulo","displayName":"titulo","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"legenda","displayName":"legenda","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"imagem","displayName":"imagem","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"fonte","displayName":"fonte","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"html","displayName":"html","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"status","displayName":"status","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.6,"position":[-1360,1040],"id":"502afbb0-d285-48a9-8821-709cd54c844d","name":"Salvar no Sheets Controle","credentials":{"googleSheetsOAuth2Api":{"id":"de8CYZ2v6bGWBjAX","name":"Google Sheets - lucas@getmia.com.br"}}},{"parameters":{"jsCode":"return items.map(item => {\n  const { noticia_id, titulo, legenda, fonte, imagem, arquivo_base64, imagem_url, status } = item.json;\n  const id = item.json.id;\n\n  return {\n    json: {\n      noticia_id,\n      titulo,\n      legenda: legenda.replace(/\\\\n/g, '\\n\\n'), // <- agora gera 1 linha em branco entre blocos\n      fonte,\n      imagem,\n      arquivo_base64,\n      imagem_url,\n      status\n    }\n  };\n});\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1552,1040],"id":"5c5e9164-8b49-4017-a986-cd5a011dfb4f","name":"Filtro dos dados consolidados"},{"parameters":{"jsCode":"const dataHoje = new Date();\nconst yyyy = dataHoje.getFullYear();\nconst mm = String(dataHoje.getMonth() + 1).padStart(2, '0');\nconst dd = String(dataHoje.getDate()).padStart(2, '0');\nconst prefixo = `noticia_${yyyy}${mm}${dd}_`;\n\nreturn items.map((item, index) => {\n  const sequencial = String(index + 1).padStart(3, '0');\n  const noticia_id = `${prefixo}${sequencial}`;\n\n  return {\n    json: {\n      ...item.json, // mantém tudo que veio antes: titulo, fonte, etc\n      noticia_id,\n      status: 'aguardando',\n      arquivo_base64: `${noticia_id}.txt`,\n      imagem_url: item.json.content.download_url  // usa o campo correto do GitHub\n    }\n  };\n});\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1952,848],"id":"11cc3316-1c11-4e55-8f4e-fda627f884b7","name":"Criação Id + Link Github"},{"parameters":{"options":{}},"type":"n8n-nodes-base.splitInBatches","typeVersion":3,"position":[-1536,1248],"id":"ea52621c-dc73-42cf-be31-1ec9bf240400","name":"Loop Over Items"},{"parameters":{"resource":"messages-api","operation":"send-image","instanceName":"social-media-finamob","remoteJid":"5511992486507","media":"={{ $json.base64Image }}","caption":"=[NOTÍCIA #{{ $json.noticia_id }}]\n\n{{ $json.legenda }}\n\nResponda com:\naprovar {{ $json.noticia_id }} ou rejeitar {{ $json.noticia_id }}","options_message":{}},"type":"n8n-nodes-evolution-api.evolutionApi","typeVersion":1,"position":[-1360,1264],"id":"7447a8e1-1b74-4fe7-b172-642ec2ef68d8","name":"Envio do post - Whatsapp","credentials":{"evolutionApi":{"id":"4JfTThlwBUF4KuNE","name":"Evolution account"}},"onError":"continueRegularOutput"},{"parameters":{"httpMethod":"POST","path":"22023357-7a89-4b14-a05b-d91742c3e76f","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[-1936,1744],"id":"18a47ee9-d5ae-450b-82dc-144f4b0a1481","name":"Webhook - Esperar resposta WhatsApp","webhookId":"22023357-7a89-4b14-a05b-d91742c3e76f"},{"parameters":{"jsCode":"const texto = $json.body?.data?.message?.conversation?.toLowerCase() || '';\nlet status = '';\nlet noticia_id = '';\n\nif (texto.includes('aprovar')) {\n  status = 'aprovado';\n} else if (texto.includes('rejeitar')) {\n  status = 'rejeitado';\n}\n\nconst match = texto.match(/noticia_\\d{8}_\\d+/);\nif (match) {\n  noticia_id = match[0];\n}\n\nreturn [{\n  json: {\n    noticia_id,\n    status,\n  }\n}];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[-1728,1744],"id":"dc2cc9e0-005c-44b7-94d2-4aaf6e360369","name":"Extrair status e ID"},{"parameters":{"operation":"update","documentId":{"__rl":true,"value":"1fWo0JNzTrseQubx5O31tEJ5Yd4jHKUCGp_9xZMPfec0","mode":"list","cachedResultName":"Controle Journal","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1fWo0JNzTrseQubx5O31tEJ5Yd4jHKUCGp_9xZMPfec0/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"base","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1fWo0JNzTrseQubx5O31tEJ5Yd4jHKUCGp_9xZMPfec0/edit#gid=0"},"columns":{"mappingMode":"autoMapInputData","value":{"status":"{{ $json.status }}"},"matchingColumns":["noticia_id"],"schema":[{"id":"noticia_id","displayName":"noticia_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"titulo","displayName":"titulo","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"legenda","displayName":"legenda","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"fonte","displayName":"fonte","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"imagem","displayName":"imagem","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"arquivo_base64","displayName":"arquivo_base64","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"file_id","displayName":"file_id","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"url_publica","displayName":"url_publica","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true,"removed":false},{"id":"status","displayName":"status","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"row_number","displayName":"row_number","required":false,"defaultMatch":false,"display":true,"type":"number","canBeUsedToMatch":true,"readOnly":true,"removed":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.6,"position":[-1520,1744],"id":"16adc3ef-1e70-4231-bd9c-08beb3c2ac56","name":"Atualizar status no Sheets Controle","credentials":{"googleSheetsOAuth2Api":{"id":"de8CYZ2v6bGWBjAX","name":"Google Sheets - lucas@getmia.com.br"}}},{"parameters":{"content":"# Atualização Controles e Envio do resultado por Whatsapp\n\n### Atualiza sheets e drive com informações e arquivos importantes\n### Envio do post completo por whatsapp para aprovador","height":896,"width":912},"type":"n8n-nodes-base.stickyNote","position":[-2016,576],"typeVersion":1,"id":"c2e95406-7c35-4ed2-989d-75c2d3c8d0fd","name":"Sticky Note12"},{"parameters":{"content":"# Webhook Aprovação do Post\n\n### Esse weebhook fica aguardando um retorno do aprovador sobre os posts enviados\n### O post pode ser aprovado ou rejeitado e os status são salvos no sheets","height":496,"width":720,"color":3},"type":"n8n-nodes-base.stickyNote","position":[-2016,1504],"typeVersion":1,"id":"5abef8e2-a2bb-435d-84e4-65db73482cfd","name":"Sticky Note13"},{"parameters":{"content":"# Ação de postar no Instagram\n\n### Aqui cadastramos os tokens necessários para a API do Meta\n### O post é realizado no mesmo momento em que a aprovação acontece","height":1696,"width":2464,"color":5},"type":"n8n-nodes-base.stickyNote","position":[-1008,1072],"typeVersion":1,"id":"c1f57681-bfc5-4d1c-8d02-46ce9656026d","name":"Sticky Note14"}],"connections":{"Instagram params":{"main":[[{"node":"Instagram prepare media","type":"main","index":0}]]},"Instagram prepare media":{"main":[[{"node":"Instagram check status of media uploaded before","type":"main","index":0}]]},"Instagram publish media":{"main":[[{"node":"Instagram check status of media published before","type":"main","index":0}]]},"If media status is finished":{"main":[[{"node":"Instagram publish media","type":"main","index":0}],[{"node":"Send a message","type":"main","index":0}]]},"If media status is finished1":{"main":[[{"node":"Send a message1","type":"main","index":0}],[{"node":"Send a message2","type":"main","index":0}]]},"Instagram check status of media uploaded before":{"main":[[{"node":"If media status is finished","type":"main","index":0}]]},"Instagram check status of media published before":{"main":[[{"node":"If media status is finished1","type":"main","index":0}]]},"RSS Folha":{"main":[[{"node":"Filtro de data da notícia 2","type":"main","index":0}]]},"RSS Investing":{"main":[[{"node":"Filtro de data da notícia 1","type":"main","index":0}]]},"RSS Metro Quadrado":{"main":[[{"node":"Filtro de data da notícia 3","type":"main","index":0}]]},"Schedule Trigger":{"main":[[{"node":"No Operation, do nothing","type":"main","index":0}]]},"No Operation, do nothing":{"main":[[{"node":"RSS Folha","type":"main","index":0},{"node":"RSS Metro Quadrado","type":"main","index":0},{"node":"RSS Investing","type":"main","index":0}]]},"OpenRouter Chat Model":{"ai_languageModel":[[{"node":"AI Agent - Estrutura dos Posts","type":"ai_languageModel","index":0}]]},"Binary > base64":{"main":[[{"node":"Dados + Imagem Final","type":"main","index":1}]]},"Create file from text":{"main":[[]]},"Google Sheets Trigger":{"main":[[{"node":"If8","type":"main","index":0}]]},"If8":{"main":[[{"node":"Instagram params","type":"main","index":0}]]},"Filtro de data da notícia 3":{"main":[[{"node":"Filtro de tema imobiliário 3","type":"main","index":0}]]},"Filtro de data da notícia 2":{"main":[[{"node":"Filtro de tema imobiliário 2","type":"main","index":0}]]},"Filtro de data da notícia 1":{"main":[[{"node":"Filtro de tema imobiliário 1","type":"main","index":0}]]},"Filtro de tema imobiliário 1":{"main":[[{"node":"Notícias Consolidadas","type":"main","index":0}]]},"Filtro de tema imobiliário 2":{"main":[[{"node":"Notícias Consolidadas","type":"main","index":1}]]},"Filtro de tema imobiliário 3":{"main":[[{"node":"Notícias Consolidadas","type":"main","index":2}]]},"Notícias Consolidadas":{"main":[[{"node":"Padronização do campo imagem","type":"main","index":0}]]},"Padronização do campo imagem":{"main":[[{"node":"Validação do campo imagem","type":"main","index":0}]]},"Validação do campo imagem":{"main":[[{"node":"Backup dados da notícia","type":"main","index":0}],[{"node":"Unificar imagem final","type":"main","index":2}]]},"Backup dados da notícia":{"main":[[{"node":"Buscar HTML da notícia","type":"main","index":0}]]},"Buscar HTML da notícia":{"main":[[{"node":"Extrair imagem do HTML","type":"main","index":0}]]},"Extrair imagem do HTML":{"main":[[{"node":"Imagem encontrada?","type":"main","index":0}]]},"Imagem encontrada?":{"main":[[{"node":"Gerar imagem com IA","type":"main","index":0}],[{"node":"Unificar imagem final","type":"main","index":1}]]},"Gerar imagem com IA":{"main":[[{"node":"Salvar imagem gerada","type":"main","index":0}]]},"Salvar imagem gerada":{"main":[[{"node":"Unificar imagem final","type":"main","index":0}]]},"Unificar imagem final":{"main":[[{"node":"AI Agent - Estrutura dos Posts","type":"main","index":0}]]},"AI Agent - Estrutura dos Posts":{"main":[[{"node":"Estruturação do JSON de saída","type":"main","index":0}]]},"Estruturação do JSON de saída":{"main":[[{"node":"Criação do HTML da Imagem","type":"main","index":0}]]},"Criação do HTML da Imagem":{"main":[[{"node":"HTML > Imagem","type":"main","index":0},{"node":"Dados + Imagem Final","type":"main","index":2}]]},"HTML > Imagem":{"main":[[{"node":"Baixar imagem","type":"main","index":0}]]},"Baixar imagem":{"main":[[{"node":"Cortar imagem 1080x1080","type":"main","index":0}]]},"Cortar imagem 1080x1080":{"main":[[{"node":"Binary > base64","type":"main","index":0},{"node":"Salvar imagem no GitHub","type":"main","index":0}]]},"Salvar imagem no GitHub":{"main":[[{"node":"Dados + Imagem Final","type":"main","index":0}]]},"Dados + Imagem Final":{"main":[[{"node":"Criação Id + Link Github","type":"main","index":0}]]},"Salvar no Sheets Controle":{"main":[[]]},"Filtro dos dados consolidados":{"main":[[{"node":"Salvar no Sheets Controle","type":"main","index":0}]]},"Criação Id + Link Github":{"main":[[{"node":"Filtro dos dados consolidados","type":"main","index":0},{"node":"Create file from text","type":"main","index":0},{"node":"Loop Over Items","type":"main","index":0}]]},"Loop Over Items":{"main":[[],[{"node":"Envio do post - Whatsapp","type":"main","index":0}]]},"Envio do post - Whatsapp":{"main":[[{"node":"Loop Over Items","type":"main","index":0}]]},"Webhook - Esperar resposta WhatsApp":{"main":[[{"node":"Extrair status e ID","type":"main","index":0}]]},"Extrair status e ID":{"main":[[{"node":"Atualizar status no Sheets Controle","type":"main","index":0}]]},"Atualizar status no Sheets Controle":{"main":[[]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{},"versionId":"539da709-1bc3-4fea-9427-54da4f56820a","triggerCount":0,"tags":[]}