{"createdAt":"2025-10-02T01:14:38.723Z","updatedAt":"2025-11-07T21:49:13.549Z","id":"SgANXIxy89SYLRHH","name":"BMS - 5.1 - Analise de Contrato","active":true,"isArchived":false,"nodes":[{"parameters":{"rule":{"interval":[{"field":"minutes"}]}},"type":"n8n-nodes-base.scheduleTrigger","typeVersion":1.2,"position":[0,0],"id":"94bb6bc0-9366-4529-9ca2-1a9ab1fea293","name":"Schedule Trigger"},{"parameters":{"operation":"getAll","tableId":"contratos_analise","returnAll":true,"filters":{"conditions":[{"keyName":"analise_ia","condition":"is","keyValue":"null"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[208,0],"id":"2809b388-f34a-4c5e-a2c5-f49d711e9044","name":"Get many rows","credentials":{"supabaseApi":{"id":"9FeQpCfKieI9F2Ms","name":"bms"}}},{"parameters":{"url":"={{ $('Get many rows').item.json.arquivo_url }}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[848,0],"id":"b8137d83-df3b-4d0f-871e-cba10856adfb","name":"Download docx"},{"parameters":{"method":"POST","url":"https://api.cloudconvert.com/v2/jobs","authentication":"genericCredentialType","genericAuthType":"httpBearerAuth","sendBody":true,"specifyBody":"json","jsonBody":"{\n  \"tasks\": {\n    \"import-my-file\": {\n      \"operation\": \"import/upload\"\n    },\n    \"convert-my-file\": {\n      \"operation\": \"convert\",\n      \"input\": [\"import-my-file\"],\n      \"input_format\": \"docx\",\n      \"output_format\": \"txt\"\n    },\n    \"export-my-file\": {\n      \"operation\": \"export/url\",\n      \"input\": [\"convert-my-file\"]\n    }\n  }\n}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[624,0],"id":"02070c7e-c1b3-4b76-b8f0-026ed252efe4","name":"Cloud Convert 1","credentials":{"httpBearerAuth":{"id":"5SMBJ5YIlKBp5V2J","name":"cloudconvert"}}},{"parameters":{"method":"POST","url":"={{ $node[\"Cloud Convert 1\"].json[\"data\"][\"tasks\"][0][\"result\"][\"form\"][\"url\"] }}","sendBody":true,"contentType":"multipart-form-data","bodyParameters":{"parameters":[{"name":"acl","value":"={{ $node[\"Cloud Convert 1\"].json[\"data\"][\"tasks\"][0][\"result\"][\"form\"][\"parameters\"][\"acl\"] }}"},{"name":"key","value":"={{ $node[\"Cloud Convert 1\"].json[\"data\"][\"tasks\"][0][\"result\"][\"form\"][\"parameters\"][\"key\"] }}"},{"name":"success_action_status","value":"={{ $node[\"Cloud Convert 1\"].json[\"data\"][\"tasks\"][0][\"result\"][\"form\"][\"parameters\"][\"success_action_status\"] }}"},{"name":"X-Amz-Credential","value":"={{ $node[\"Cloud Convert 1\"].json[\"data\"][\"tasks\"][0][\"result\"][\"form\"][\"parameters\"][\"X-Amz-Credential\"] }}"},{"name":"X-Amz-Algorithm","value":"={{ $node[\"Cloud Convert 1\"].json[\"data\"][\"tasks\"][0][\"result\"][\"form\"][\"parameters\"][\"X-Amz-Algorithm\"] }}"},{"name":"X-Amz-Date","value":"={{ $node[\"Cloud Convert 1\"].json[\"data\"][\"tasks\"][0][\"result\"][\"form\"][\"parameters\"][\"X-Amz-Date\"] }}"},{"name":"Policy","value":"={{ $node[\"Cloud Convert 1\"].json[\"data\"][\"tasks\"][0][\"result\"][\"form\"][\"parameters\"][\"Policy\"] }}"},{"name":"X-Amz-Signature","value":"={{ $node[\"Cloud Convert 1\"].json[\"data\"][\"tasks\"][0][\"result\"][\"form\"][\"parameters\"][\"X-Amz-Signature\"] }}"},{"parameterType":"formBinaryData","name":"file","inputDataFieldName":"data"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[208,512],"id":"3366b618-ac20-43b7-9102-7b077dd6b0dd","name":"Cloud Convert 2","disabled":true},{"parameters":{"url":"=https://api.cloudconvert.com/v2/jobs/{{ $('Cloud Convert 1').item.json.data.id }}","authentication":"genericCredentialType","genericAuthType":"httpBearerAuth","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[416,512],"id":"e1fe20fd-7b7f-46fd-aa6c-5b7607aa37dc","name":"Cloud Convert 3","credentials":{"httpBearerAuth":{"id":"5SMBJ5YIlKBp5V2J","name":"cloudconvert"}},"disabled":true},{"parameters":{"url":"={{ $json[\"data\"][\"tasks\"][0][\"result\"][\"files\"][0][\"url\"] }}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[896,496],"id":"9fd1deae-ea28-45f8-b332-1297259f4146","name":"Arquivo txt","disabled":true},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"c80cf2d7-1a7d-4105-9cce-94a5fdccf2f1","leftValue":"={{ $json[\"data\"][\"tasks\"].find(t => t.name === \"export-my-file\").status }}","rightValue":"finished","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[624,512],"id":"c69d590f-6fdf-4c16-a76a-defaf007d370","name":"If","disabled":true},{"parameters":{"amount":3},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[864,688],"id":"ce1c4922-d83b-4778-93b5-ddb1e417f8d5","name":"Wait","webhookId":"8d351566-c0ae-4e40-b2e4-875447ff5cd7","disabled":true},{"parameters":{"resource":"file","options":{"purpose":"assistants"}},"type":"@n8n/n8n-nodes-langchain.openAi","typeVersion":1.8,"position":[1040,0],"id":"a2b42365-db68-4e9e-b285-110c5a56b1db","name":"Upload a file","credentials":{"openAiApi":{"id":"GLHn0uXL8dRQAYuS","name":"OpenAi account"}}},{"parameters":{"method":"POST","url":"https://api.openai.com/v1/threads","authentication":"genericCredentialType","genericAuthType":"httpBearerAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"OpenAI-Beta","value":"assistants=v2"}]},"sendBody":true,"specifyBody":"json","jsonBody":"{}","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[416,0],"id":"3f2e2718-6b89-4e0e-b76b-6c27fd854f24","name":"Criar Thread","credentials":{"httpBearerAuth":{"id":"OnuV9uSBe5dFCABf","name":"OpenAI"}}},{"parameters":{"method":"POST","url":"=https://api.openai.com/v1/threads/{{ $('Criar Thread').item.json.id }}/messages","authentication":"genericCredentialType","genericAuthType":"httpBearerAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"OpenAI-Beta","value":"assistants=v2"},{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"={\n  \"role\": \"user\",\n  \"content\": [\n    {\n      \"type\": \"text\",\n      \"text\": \"Analise o contrato anexado comparando com o modelo {{ $('Get many rows').item.json.tipo_documento }}. Identifique cada cl√°usula divergente e apresente o texto completo da cl√°usula no contrato modelo e no contrato do cliente. N√£o resuma ‚Äî reproduza integralmente as cl√°usulas e destaque as diferen√ßas entre elas, conforme o formato de relat√≥rio jur√≠dico j√° configurado no sistema.\"\n    }\n  ],\n  \"attachments\": [\n    {\n      \"file_id\": \"{{ $json.id }}\",\n      \"tools\": [\n        {\n          \"type\": \"file_search\"\n        }\n      ]\n    }\n  ]\n}\n","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1248,0],"id":"a1a1980c-0c7d-4417-b492-1f2c8dc0a2f8","name":"Adicionar docs na thread","credentials":{"httpBearerAuth":{"id":"OnuV9uSBe5dFCABf","name":"OpenAI"}}},{"parameters":{"method":"POST","url":"=https://api.openai.com/v1/threads/{{ $json.thread_id }}/runs","authentication":"genericCredentialType","genericAuthType":"httpBearerAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"OpenAI-Beta","value":"assistants=v2"},{"name":"Content-Type","value":"application/json"}]},"sendBody":true,"specifyBody":"json","jsonBody":"{\n  \"assistant_id\": \"asst_ni2gQtWvfl5nArr3CNYxY2ap\", \n  \"instructions\": \"Compare o contrato do cliente com o modelo GILRAT e siga as instru√ß√µes do sistema j√° configuradas.\"\n}\n","options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1456,0],"id":"991b67df-5806-49fb-9e1a-58b10558fb1d","name":"Criar a run","credentials":{"httpBearerAuth":{"id":"OnuV9uSBe5dFCABf","name":"OpenAI"}}},{"parameters":{"url":"=https://api.openai.com/v1/threads/{{ $json.thread_id }}/runs/{{ $json.id }}","authentication":"genericCredentialType","genericAuthType":"httpBearerAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"OpenAI-Beta","value":"assistants=v2"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[1648,0],"id":"0180eed3-4244-4160-9504-dc1ae5aba8dc","name":"Status run","credentials":{"httpBearerAuth":{"id":"OnuV9uSBe5dFCABf","name":"OpenAI"}}},{"parameters":{"url":"=https://api.openai.com/v1/threads/{{ $json.thread_id }}/messages","authentication":"genericCredentialType","genericAuthType":"httpBearerAuth","sendHeaders":true,"headerParameters":{"parameters":[{"name":"OpenAI-Beta","value":"assistants=v2"},{"name":"Content-Type","value":"application/json"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[2176,-16],"id":"e02068e2-a686-4b05-a717-1e3ed21e633a","name":"response openai","credentials":{"httpBearerAuth":{"id":"OnuV9uSBe5dFCABf","name":"OpenAI"}}},{"parameters":{"conditions":{"options":{"caseSensitive":true,"leftValue":"","typeValidation":"strict","version":2},"conditions":[{"id":"0ce43a8e-fad6-4dbc-b0b3-cd5f2eb61703","leftValue":"={{ $json.status }}","rightValue":"completed","operator":{"type":"string","operation":"equals","name":"filter.operator.equals"}}],"combinator":"and"},"options":{}},"type":"n8n-nodes-base.if","typeVersion":2.2,"position":[1856,0],"id":"b3555196-34b3-4206-a10b-1a0fadf2084d","name":"If1"},{"parameters":{"amount":3},"type":"n8n-nodes-base.wait","typeVersion":1.1,"position":[2176,208],"id":"0657c14e-98de-409d-ab31-ad9db8a9e1c3","name":"Wait1","webhookId":"0c2a1fad-219f-4ccc-b99b-d484cecd7aa6"},{"parameters":{"promptType":"define","text":"=**Voc√™ √© um assistente jur√≠dico especializado em an√°lise comparativa de contratos.**\nReceber√° um **JSON estruturado** com diverg√™ncias e riscos contratuais (produzido por outro agente).\nCada item cont√©m: tema, cl√°usula, trechos do contrato modelo e do cliente, severidade, impacto e refer√™ncias.\n\nRespeite o formato de Markdown com duas quebras de linha (\\n\\n) entre se√ß√µes, blocos e par√°grafos.\n\nCada campo (Cliente, Modelo, Coment√°rio, Severidade, etc.) deve sempre estar em linhas separadas.\n\nUse sempre o padr√£o de t√≠tulo e subt√≠tulo em Markdown (##, ###, **negrito**, > cita√ß√µes).\n\n    IMPORTANTE para tabelas markdown:\n\n        A linha separadora (com ---) deve ter pelo menos 3 h√≠fens por coluna\n        O n√∫mero de h√≠fens pode ser qualquer valor ‚â• 3, mas deve ter o mesmo n√∫mero de colunas que o cabe√ßalho\n        Mantenha o alinhamento visual das colunas usando espa√ßos\n\n\n\n### üéØ **Sua miss√£o**\n\nGerar um **relat√≥rio comparativo narrativo e detalhado**, no estilo de um advogado s√™nior, **mostrando integralmente as cl√°usulas divergentes** (n√£o resumos). N√£o mostre o JSON recebido, nem diga que recebeu dados. Comece diretamente pelo relat√≥rio no formato descrito abaixo.\nA linguagem deve ser t√©cnica e clara, explicando **o que muda, por que muda e o impacto pr√°tico/jur√≠dico da mudan√ßa.**\nGerar um **relat√≥rio jur√≠dico comparativo completo e visual**, destacando:\n* **O que mudou** entre o contrato modelo e o contrato do cliente.\n* **Como era antes (modelo)** e **como ficou (cliente)**, com os blocos textuais completos das cl√°usulas.\n* **Impacto e severidade** de cada altera√ß√£o.\n* **Sugest√µes de aten√ß√£o jur√≠dica**, quando cab√≠vel.\n\nSeu p√∫blico √© o **time jur√≠dico da BMS**, que precisa entender o contexto e as consequ√™ncias de cada altera√ß√£o.\n\n---\n\n### üß± **Estrutura obrigat√≥ria da resposta**\n\n#### üßæ **1Ô∏è‚É£ Introdu√ß√£o / Resumo Executivo**\n\nEm 2‚Äì3 par√°grafos, explique:\n\n* Quais contratos est√£o sendo comparados (modelo vs cliente).\n* Quais s√£o os principais eixos de diverg√™ncia (financeiro, prazos, penalidades, LGPD etc.).\n* Uma vis√£o geral do impacto jur√≠dico e recomenda√ß√µes de aten√ß√£o.\n\n> Exemplo:\n> A compara√ß√£o entre o contrato modelo GILRAT e o contrato do Grupo Santa Helena evidencia diverg√™ncias relevantes nos temas financeiros e de rescis√£o, al√©m de ajustes necess√°rios para conformidade com a LGPD. As principais altera√ß√µes afetam o fluxo de pagamento de honor√°rios e a proporcionalidade de multas em caso de descumprimento contratual.\n\n#### ‚ö†Ô∏è **2Ô∏è‚É£ Riscos Cr√≠ticos**\n\nListe os pontos de **maior impacto jur√≠dico, financeiro ou operacional**.\nPara cada item:\n\n* **T√≠tulo resumido**\n* **Trecho relevante (modelo vs cliente)** ‚Äî citar o texto completo das cl√°usulas alteradas\n* **Coment√°rio t√©cnico breve (2‚Äì3 linhas)** explicando a diferen√ßa e o risco\n* **Severidade + impacto** (em negrito)\n* **Refer√™ncia de cl√°usula/p√°gina**\n---\n\n#### ‚öñÔ∏è **2Ô∏è‚É£ Diferen√ßas Significativas nas Cl√°usulas**\n\nApresente **cada diverg√™ncia de forma narrativa**, numerada, no seguinte formato:\n\n---\n\n**1. [T√≠tulo resumido da diverg√™ncia]**\n\nAmbos os contratos tratam do mesmo tema, por√©m com diferen√ßas relevantes quanto a [descri√ß√£o breve da diferen√ßa].\n\n**Contrato do Cliente (\"[Nome do cliente]\"):**\nCl√°usula [identifica√ß√£o, se dispon√≠vel]:\n\n> ‚ÄúTrecho completo do contrato do cliente aqui.‚Äù\n> Explique brevemente o sentido jur√≠dico do trecho, se necess√°rio.\n\n**Contrato Modelo (\"[Nome do modelo]\"):**\nCl√°usula [identifica√ß√£o, se dispon√≠vel]:\n\n> ‚ÄúTrecho completo do contrato modelo aqui.‚Äù\n> Descreva brevemente o contexto original e como difere do cliente.\n\n**Coment√°rio Jur√≠dico:**\nExplique **em at√© 4 linhas** o impacto pr√°tico da diferen√ßa (ex: risco financeiro, lacuna contratual, conflito de interpreta√ß√£o).\n\n> *Exemplo:* A altera√ß√£o postergando o pagamento de honor√°rios para ap√≥s a compensa√ß√£o dos cr√©ditos transfere o risco financeiro √† contratada e afeta o fluxo de caixa.\n\n**Severidade:** Alta | **Impacto:** Financeiro\n**Refer√™ncia:** Modelo p.2 / Cliente p.5\n\n---\n\n**2. [Pr√≥xima diverg√™ncia]**\n\nRepita o mesmo formato, sempre **mostrando as cl√°usulas completas**.\n\n---\n\n#### üìë **3Ô∏è‚É£ Resumo Comparativo (opcional e visual)**\n\nAp√≥s todas as diverg√™ncias, apresente uma **tabela Markdown** resumindo os principais contrastes:\n\n| Tema        | Modelo   | Cliente | Observa√ß√£o        |\n| --------- | ------------------- | ----------------- | ------------------- |\n| Forma de pagamento     | Boleto ap√≥s reconhecimento | Boleto ap√≥s compensa√ß√£o | Atraso no fluxo de caixa     |\n| Honor√°rios na rescis√£o | Pagamento integral         | 50% dos honor√°rios      | Perda financeira na rescis√£o |\n\n---\n\n#### ‚úÖ **4Ô∏è‚É£ Considera√ß√µes Finais**\n\nEncerre com um breve resumo t√©cnico:\n\n> Em s√≠ntese, as altera√ß√µes propostas pelo contrato do cliente introduzem maior risco financeiro e reduzem a previsibilidade para a contratada. Recomenda-se revisar as cl√°usulas de honor√°rios e rescis√£o antes da assinatura, assegurando alinhamento com o modelo jur√≠dico padr√£o da BMS.\n\nE finalize com:\n\n> *Este relat√≥rio tem car√°ter informativo e n√£o substitui consulta jur√≠dica individualizada.*\n\n#### ‚úÖ **5Ô∏è‚É£ Checklist de Conformidade**\n\nListe os principais pontos avaliados com ‚úÖ e ‚ùå conforme o campo ‚Äúok‚Äù do JSON.\n\nExemplo:\n‚úÖ Objeto e escopo definidos\n‚ùå Cl√°usulas de rescis√£o detalhadas\n‚ùå Penalidades proporcionais\n‚úÖ Sigilo e confidencialidade adequados\n\n---\n\n### üí¨ **Tom e Estilo**\n\n* **Evite listas secas e bullets curtos.**\n  Prefira explica√ß√£o narrativa, fluida e fundamentada.\n* **Inclua os blocos de cl√°usulas na √≠ntegra.**\n  Nunca resuma ou sintetize o conte√∫do da cl√°usula ‚Äî reproduza literalmente o texto comparado.\n* **Explique a diferen√ßa em contexto**, como no exemplo do NDA: por que a mudan√ßa foi feita, o que muda juridicamente e qual o efeito pr√°tico.\n* **Destaque termos importantes** (como ‚Äúmultas‚Äù, ‚Äúprazo‚Äù, ‚Äúrescis√£o‚Äù, ‚ÄúLGPD‚Äù) em **negrito** para facilitar leitura.\n\n---\n\n### üìé **Entrada esperada**\n\n{{ $json.data[0].content[0].text.value }}\n\n---\n\n### ‚ú® **Resultado esperado (modelo visual resumido)**\n\n## üßæ **1Ô∏è‚É£ Introdu√ß√£o / Resumo Executivo**\n\nA compara√ß√£o entre o **Contrato Modelo GILRAT** e o **Contrato do Grupo Santa Helena** evidencia **diverg√™ncias significativas nas cl√°usulas financeiras e de rescis√£o**.\nAs principais diferen√ßas concentram-se nos **crit√©rios de pagamento de honor√°rios** e na **proporcionalidade de remunera√ß√£o em caso de rescis√£o contratual**, impactando diretamente o **fluxo de caixa** e a **seguran√ßa jur√≠dica da contratada**.\n\nRecomenda-se especial aten√ß√£o aos ajustes propostos pelo cliente, que **transferem parte do risco financeiro** √† contratada e **reduzem a previsibilidade** no recebimento dos honor√°rios de √™xito.\n\n---\n\n## ‚ö†Ô∏è **2Ô∏è‚É£ Riscos Cr√≠ticos**\n\n| Tema                       | Trecho Relevante | Coment√°rio T√©cnico | Severidade | Impacto | Refer√™ncia |\n| --------------------------- | --------------------------- | --------------------------- | --------------------------- | --------------------------- | --------------------------- |\n| **Forma de Pagamento**     | **Modelo:** ‚Äú...‚Äù<br>**Cliente:** ‚Äú...‚Äù | ... | **Alta** | **Financeiro** | Modelo p.2 / Cliente p.5 |\n| **Honor√°rios na Rescis√£o** | **Modelo:** ‚Äú...‚Äù<br>**Cliente:** ‚Äú...‚Äù | ... | **Alta** | **Financeiro** | Modelo p.15 / Cliente p.16 |\n\n---\n\n## ‚öñÔ∏è **3Ô∏è‚É£ Diferen√ßas Significativas nas Cl√°usulas**\nCada diverg√™ncia deve seguir o formato Markdown narrativo com espa√ßamento entre blocos (use \\n\\n):\n\n### **1. Forma de Pagamento de Honor√°rios**\n\nAmbos os contratos tratam da forma e do momento de pagamento dos honor√°rios, mas h√° diferen√ßa relevante quanto ao **marco temporal de exigibilidade**.\n\n**Contrato do Cliente (\"Grupo Santa Helena\"):**\n\n> ‚ÄúOs honor√°rios s√≥ poder√£o ser pagos ap√≥s a confirma√ß√£o de compensa√ß√£o do cr√©dito fiscal, com envio do boleto at√© o dia 20 e vencimento at√© o dia 10 do m√™s seguinte.‚Äù\n\n**Contrato Modelo (\"GILRAT\"):**\n\n> ‚ÄúOs honor√°rios ser√£o pagos por meio de boleto emitido ap√≥s o reconhecimento do benef√≠cio econ√¥mico, com vencimento em at√© 7 dias.‚Äù\n\n**Coment√°rio Jur√≠dico:**\nO modelo prev√™ **liquidez imediata** ap√≥s o reconhecimento do benef√≠cio, garantindo fluxo de caixa previs√≠vel.\nO contrato do cliente condiciona o pagamento √† **compensa√ß√£o efetiva**, o que **posterga o recebimento** e **transfere risco financeiro** √† contratada.\n\n**Severidade:** Alta | **Impacto:** Financeiro\n**Refer√™ncia:** Modelo p.2 / Cliente p.5\n\n---\n\n### **2. Honor√°rios na Rescis√£o**\n\nA diferen√ßa central est√° no **percentual devido** em caso de rescis√£o contratual ap√≥s o levantamento de cr√©ditos.\n\n**Contrato do Cliente (\"Grupo Santa Helena\"):**\n\n> ‚ÄúEm caso de rescis√£o ap√≥s o levantamento de cr√©ditos, ser√° devido o pagamento de 50% dos honor√°rios sobre o valor apurado.‚Äù\n\n**Contrato Modelo (\"GILRAT\"):**\n\n> ‚ÄúEm caso de rescis√£o ap√≥s o levantamento de cr√©ditos, ser√° devido o pagamento integral dos honor√°rios sobre o valor apurado.‚Äù\n\n**Coment√°rio Jur√≠dico:**\nA cl√°usula do cliente **reduz a remunera√ß√£o prevista**, criando **risco de inadimplemento parcial** e **desequil√≠brio contratual**.\nA vers√£o do modelo assegura **integralidade da contrapresta√ß√£o**, em conformidade com o princ√≠pio da boa-f√© objetiva.\n\n**Severidade:** Alta | **Impacto:** Financeiro\n**Refer√™ncia:** Modelo p.15 / Cliente p.16\n\n---\n\n## üìë **4Ô∏è‚É£ Resumo Comparativo**\n\n| Tema                       | Contrato Modelo                                                                     | Contrato do Cliente                                                                | Observa√ß√£o                                    |\n|-------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|\n| **Forma de Pagamento**     | Boleto emitido ap√≥s reconhecimento do benef√≠cio econ√¥mico, vencimento em at√© 7 dias | Pagamento condicionado √† compensa√ß√£o do cr√©dito, vencimento dia 10 do m√™s seguinte | Postergamento do pagamento e risco financeiro |\n| **Honor√°rios na Rescis√£o** | Pagamento integral dos honor√°rios                                                   | Pagamento de 50% dos honor√°rios                                                    | Perda de receita e desequil√≠brio contratual   |\n\n---\n\n## ‚úÖ **5Ô∏è‚É£ Considera√ß√µes Finais**\n\nFinalize com um breve parecer t√©cnico (em par√°grafos separados com \\n\\n):\n\nEm s√≠ntese, as altera√ß√µes propostas pelo contrato do cliente **introduzem riscos financeiros relevantes**, especialmente ao condicionar o pagamento √† compensa√ß√£o do cr√©dito e reduzir honor√°rios em caso de rescis√£o.\nEssas mudan√ßas podem **afetar o fluxo de caixa** e **diminuir a previsibilidade contratual**, sendo recomend√°vel **revis√£o das cl√°usulas financeiras** antes da assinatura para assegurar alinhamento com o modelo jur√≠dico da BMS.\n\n> *Este relat√≥rio tem car√°ter informativo e n√£o substitui consulta jur√≠dica individualizada.*\n\n---\n\n## ‚úÖ **6Ô∏è‚É£ Checklist de Conformidade**\n\n‚úÖ Objeto e escopo definidos\n‚ùå Cl√°usulas de rescis√£o equilibradas\n‚ùå Condi√ß√µes de pagamento favor√°veis √† contratada\n‚úÖ Cl√°usulas de sigilo e confidencialidade adequadas\n‚úÖ Conformidade com a LGPD\n\n\n","options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.1,"position":[2416,-16],"id":"3b8332d7-9e03-410e-acb5-630e2b42afd3","name":"AI Agent"},{"parameters":{"model":"openai/gpt-4","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenRouter","typeVersion":1,"position":[2416,160],"id":"f3029111-cf74-49e6-b515-a4683091c0d7","name":"OpenRouter Chat Model","credentials":{"openRouterApi":{"id":"o1ywdYlH64cgqSMT","name":"OpenRouter account"}}},{"parameters":{"operation":"update","tableId":"contratos_analise","filters":{"conditions":[{"keyName":"id","condition":"eq","keyValue":"={{ $('Get many rows').item.json.id }}"}]},"fieldsUi":{"fieldValues":[{"fieldId":"analise_ia","fieldValue":"={{ $('AI Agent').item.json.output }}"},{"fieldId":"url_download_word","fieldValue":"={{ $json.pdf }}"},{"fieldId":"status","fieldValue":"concluido"}]}},"type":"n8n-nodes-base.supabase","typeVersion":1,"position":[3232,-16],"id":"47c3a720-20cd-48e8-9b62-a949d786943d","name":"Update Supabase","credentials":{"supabaseApi":{"id":"9FeQpCfKieI9F2Ms","name":"bms"}}},{"parameters":{"jsCode":"// Converte o texto em Markdown que chega em $json.output para HTML b√°sico\n// Sa√≠da: { html: \"<!doctype html>... </html>\" }\n\nconst md = ($json.output ?? '').toString();\n\n// 1) Escapa HTML bruto para evitar quebras\nfunction escapeHtml(s) {\n  return s.replace(/&/g, '&amp;')\n          .replace(/</g, '&lt;')\n          .replace(/>/g, '&gt;');\n}\nlet html = escapeHtml(md);\n\n// 2) T√≠tulos (#, ##, ### ...)\nhtml = html\n  .replace(/^###### (.*)$/gm, '<h6>$1</h6>')\n  .replace(/^##### (.*)$/gm, '<h5>$1</h5>')\n  .replace(/^#### (.*)$/gm,  '<h4>$1</h4>')\n  .replace(/^### (.*)$/gm,   '<h3>$1</h3>')\n  .replace(/^## (.*)$/gm,    '<h2>$1</h2>')\n  .replace(/^# (.*)$/gm,     '<h1>$1</h1>');\n\n// 3) Negrito e it√°lico (**texto**, *texto*)\nhtml = html\n  .replace(/\\*\\*(.+?)\\*\\*/g, '<strong>$1</strong>')\n  // it√°lico com cuidado para n√£o pegar * em listas\n  .replace(/(^|[\\s(])\\*(?!\\s)(.+?)(?<!\\s)\\*(?=[\\s).,;:!?]|$)/g, '$1<em>$2</em>');\n\n// 4) Constr√≥i listas e par√°grafos\nconst lines = html.split(/\\r?\\n/);\nlet out = [];\nlet inUl = false, inOl = false;\n\nfunction closeLists() {\n  if (inUl) { out.push('</ul>'); inUl = false; }\n  if (inOl) { out.push('</ol>'); inOl = false; }\n}\n\nfor (const line of lines) {\n  let m;\n  if ((m = line.match(/^\\s*[-‚Ä¢*]\\s+(.*)$/))) {\n    if (inOl) { out.push('</ol>'); inOl = false; }\n    if (!inUl) { out.push('<ul>'); inUl = true; }\n    out.push(`<li>${m[1]}</li>`);\n  } else if ((m = line.match(/^\\s*\\d+\\.\\s+(.*)$/))) {\n    if (inUl) { out.push('</ul>'); inUl = false; }\n    if (!inOl) { out.push('<ol>'); inOl = true; }\n    out.push(`<li>${m[1]}</li>`);\n  } else {\n    closeLists();\n    if (line.trim() === '') {\n      out.push('<br/>');\n    } else {\n      out.push(`<p>${line}</p>`);\n    }\n  }\n}\ncloseLists();\n\nconst body = out.join('\\n');\n\n// 5) HTML final com estilo simples (bom para convers√£o a DOCX)\nconst fullHtml = `<!doctype html>\n<html lang=\"pt-BR\">\n<head>\n  <meta charset=\"utf-8\">\n  <style>\n    body{font-family: Arial, Helvetica, sans-serif; line-height:1.38; color:#111; margin:24px;}\n    h1{font-size:20pt;margin:0 0 8px} h2{font-size:16pt;margin:16px 0 6px} h3{font-size:13pt;margin:14px 0 6px}\n    h4,h5,h6{margin:12px 0 6px}\n    p{margin:6px 0}\n    ul,ol{margin:6px 0 12px 22px} li{margin:2px 0}\n    strong{font-weight:700} em{font-style:italic}\n    table{border-collapse:collapse;margin:8px 0;width:100%}\n    th,td{border:1px solid #ccc;padding:6px;vertical-align:top}\n  </style>\n</head>\n<body>\n${body}\n</body>\n</html>`;\n\nreturn [{ json: { html: fullHtml } }];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[2784,-16],"id":"d280bb6f-aa91-4e7c-abd2-68e64f103848","name":"Code"},{"parameters":{"method":"POST","url":"https://v2.api2pdf.com/chrome/html","authentication":"genericCredentialType","genericAuthType":"httpHeaderAuth","sendBody":true,"bodyParameters":{"parameters":[{"name":"html","value":"={{ $json.html }}"},{"name":"inlinePdf","value":"false"}]},"options":{}},"type":"n8n-nodes-base.httpRequest","typeVersion":4.2,"position":[2992,-16],"id":"ce0ba2bb-5c6c-4782-8d9c-bd3ee686f5bb","name":"Convert PDF - api2pdf","credentials":{"httpHeaderAuth":{"id":"7eI6uGOUWvQGoTTl","name":"api2pdf"}}},{"parameters":{"httpMethod":"POST","path":"analise-de-contrato","options":{}},"type":"n8n-nodes-base.webhook","typeVersion":2,"position":[192,192],"id":"d9fba96e-b59b-4b0f-91da-d48ef179cb11","name":"Webhook","webhookId":"2cd7bf52-87fb-43d1-be9d-8fd115885e32","disabled":true}],"connections":{"Schedule Trigger":{"main":[[{"node":"Get many rows","type":"main","index":0}]]},"Get many rows":{"main":[[{"node":"Criar Thread","type":"main","index":0}]]},"Download docx":{"main":[[{"node":"Upload a file","type":"main","index":0}]]},"Cloud Convert 1":{"main":[[{"node":"Download docx","type":"main","index":0}]]},"Cloud Convert 2":{"main":[[{"node":"Cloud Convert 3","type":"main","index":0}]]},"Cloud Convert 3":{"main":[[{"node":"If","type":"main","index":0}]]},"If":{"main":[[{"node":"Arquivo txt","type":"main","index":0}],[{"node":"Wait","type":"main","index":0}]]},"Wait":{"main":[[{"node":"Cloud Convert 3","type":"main","index":0}]]},"Arquivo txt":{"main":[[]]},"Upload a file":{"main":[[{"node":"Adicionar docs na thread","type":"main","index":0}]]},"Criar Thread":{"main":[[{"node":"Cloud Convert 1","type":"main","index":0}]]},"Adicionar docs na thread":{"main":[[{"node":"Criar a run","type":"main","index":0}]]},"Criar a run":{"main":[[{"node":"Status run","type":"main","index":0}]]},"Status run":{"main":[[{"node":"If1","type":"main","index":0}]]},"If1":{"main":[[{"node":"response openai","type":"main","index":0}],[{"node":"Wait1","type":"main","index":0}]]},"Wait1":{"main":[[{"node":"Status run","type":"main","index":0}]]},"response openai":{"main":[[{"node":"AI Agent","type":"main","index":0}]]},"OpenRouter Chat Model":{"ai_languageModel":[[{"node":"AI Agent","type":"ai_languageModel","index":0}]]},"AI Agent":{"main":[[{"node":"Code","type":"main","index":0}]]},"Code":{"main":[[{"node":"Convert PDF - api2pdf","type":"main","index":0}]]},"Convert PDF - api2pdf":{"main":[[{"node":"Update Supabase","type":"main","index":0}]]},"Webhook":{"main":[[]]}},"settings":{"executionOrder":"v1","callerPolicy":"workflowsFromSameOwner","errorWorkflow":"GbORhS24Rzw7hHlt"},"staticData":{"node:Schedule Trigger":{"recurrenceRules":[]}},"meta":{"templateCredsSetupCompleted":true},"pinData":{"Schedule Trigger":[{"json":{"timestamp":"2025-11-07T16:46:27.298-03:00","Readable date":"November 7th 2025, 4:46:27 pm","Readable time":"4:46:27 pm","Day of week":"Friday","Year":"2025","Month":"November","Day of month":"07","Hour":"16","Minute":"46","Second":"27","Timezone":"America/Sao_Paulo (UTC-03:00)"}}]},"versionId":"6a4c190f-dfe6-41fd-ac68-0451c50f44ba","triggerCount":1,"tags":[]}