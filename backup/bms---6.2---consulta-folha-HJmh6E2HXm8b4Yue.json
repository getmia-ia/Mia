{"createdAt":"2025-10-20T18:55:46.059Z","updatedAt":"2025-11-10T21:52:55.179Z","id":"HJmh6E2HXm8b4Yue","name":"BMS - 6.2 - Consulta Folha","active":false,"isArchived":false,"nodes":[{"parameters":{"inputSource":"jsonExample","jsonExample":"{\n\"pergunta\": \"quanto foi gasto com horas extras em março de 2024\"\n}"},"type":"n8n-nodes-base.executeWorkflowTrigger","typeVersion":1.1,"position":[-96,-736],"id":"e33cb870-3ce6-4f60-8161-f95b677655d6","name":"trigger"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenRouter","typeVersion":1,"position":[1584,-480],"id":"7ac2a397-9206-40c6-914b-946c37cf0f5b","name":"OpenRouter Chat Model","credentials":{"openRouterApi":{"id":"o1ywdYlH64cgqSMT","name":"OpenRouter account"}}},{"parameters":{"promptType":"define","text":"=### Dia Atual: {{ $now.weekdayLong }},{{ $now.format('dd/MM/yyyy') }},{{ $now.hour.toString().padStart(2, '0') }}:{{ $now.minute.toString().padStart(2, '0')}}\n\nVocê é um interpretador de perguntas sobre folha de pagamento e colaboradores.\n\nSua função é transformar a pergunta do usuário em um JSON com filtros objetivos para montar uma query SQL.\n\nUse os dados de contexto disponíveis abaixo:\n\n**Rubricas disponíveis:** {{ $json.parametros_folha.rubricas.map(r => r.Descrição_Rubrica).join(', ') }}\n\n**Empresas disponíveis:** {{ $json.parametros_folha.empresas.map(e => e.Nome_da_Empresa).join(', ') }}\n\n**Áreas disponíveis:** {{ $json.parametros_folha.areas.map(a => a.Área).join(', ') }}\n\n**Departamentos disponíveis:** {{ $json.parametros_folha.departamentos.map(d => d.departamentos).join(', ') }}\n\n**Centro de Custo disponíveis:** {{ $json.parametros_folha.centro_de_custo.map(f => f.Centro_de_Custo).join(', ') }}\n\n**Cargos disponíveis:** {{ $json.parametros_folha.cargos.map(c => c.cargos).join(', ') }}\n\nQue contêm:\n- rubricas: lista de rubricas e suas categorias macro (campo tipo_custo)\n- empresas: lista de empresas disponíveis\n- áreas, departamentos, centro_de_custo e cargos: estrutura organizacional completa\n\nAnalise a pergunta em {{ $json.pergunta }} e devolva apenas um JSON com os filtros detectados, sem texto adicional.\n\nCampos esperados:\n- mes_inicio (AAAA-MM)\n- mes_fim (AAAA-MM)\n- tipo_custo (ex: Salário, Benefícios, Horas Extras e Adicionais, Encargos, etc.)\n- area\n- departamento\n- centro_de_custo\n- cargo\n- empresa\n- metrica (ex: total_gasto, ranking, media, comparativo)\n- periodo_comparativo (opcional)\n\nRegras:\n- Se o usuário não especificar meses, defina o range como os **últimos 3 meses até o atual**.\n- Se disser “mês passado”, use o mês anterior e os dois anteriores a ele.\n- Se pedir um mês específico, puxe também os dois anteriores.\n- Se disser “ano inteiro”, use o range completo informado.\n- Se a pergunta for genérica (“quanto gastei com pessoas”), use tipo_custo = “todas”.\n- Se não houver filtros de área, departamento, cargo ou empresa, retorne null nesses campos.\n- Sempre responda apenas o JSON, sem explicações.\n\nExemplo de saída:\n{\n  \"mes_inicio\": \"2024-10\",\n  \"mes_fim\": \"2024-12\",\n  \"tipo_custo\": \"Benefícios\",\n  \"area\": \"Financeiro\",\n  \"departamento\": null,\n  \"centro_de_custo\": null,\n  \"cargo\": null,\n  \"empresa\": null,\n  \"metrica\": \"total_gasto\",\n  \"periodo_comparativo\": 3\n}\n","options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.1,"position":[1584,-704],"id":"6140b614-29eb-4f22-8302-bc29c416569b","name":"Interpretar pergunta"},{"parameters":{"operation":"executeQuery","query":"{{$json.query}}"},"type":"n8n-nodes-base.microsoftSql","typeVersion":1.1,"position":[2192,-704],"id":"851b7a14-2f0d-433a-b985-1ed4ecf31654","name":"Executar Query","alwaysOutputData":true,"credentials":{"microsoftSql":{"id":"WFNrTNj4QqdUC7Gb","name":"Azure - BMS"}}},{"parameters":{"jsCode":"// === INPUTS ===\n// CORREÇÃO: Extrai filtros da estrutura correta\nlet filtros;\n\ntry {\n  if (typeof $json === 'object' && $json.output) {\n    filtros = JSON.parse($json.output);\n  } else {\n    filtros = $json;\n  }\n} catch (e) {\n  console.log('❌ Erro ao parsear filtros:', e);\n  filtros = {};\n}\n\n// === LÓGICA DE PERÍODO ===\nconst now = new Date();\nlet mesInicio, mesFim;\n\nif (filtros.mes_inicio && filtros.mes_fim) {\n  mesInicio = filtros.mes_inicio;\n  mesFim = filtros.mes_fim;\n} else {\n  const fim = new Date(now);\n  const inicio = new Date(now);\n  inicio.setMonth(inicio.getMonth() - 2);\n  mesInicio = `${inicio.getFullYear()}-${String(inicio.getMonth() + 1).padStart(2, '0')}`;\n  mesFim = `${fim.getFullYear()}-${String(fim.getMonth() + 1).padStart(2, '0')}`;\n}\n\n// === BASE DA QUERY ===\nlet query = `\nSELECT TOP 1000\n  REPLACE(REPLACE(REPLACE(c.[CPF], '.', ''), '-', ''), ' ', '') AS CPF_Limpo,\n  c.[Nome], c.[Cargo], c.[Departamento], c.[Centro_de_Custo],\n  c.[Salário], c.[Vale_Refeição], c.[Nome_da_Empresa], c.[Área],\n  r.[Código_Rubrica], r.[Descrição_Rubrica], r.[Descrição_Natureza_Rubrica],\n  r.[Valor], r.[Mes_ref_folha]\nFROM [RhTech_fake_Colaboradores] c\nLEFT JOIN [RhTech_fake_Rubricas] r\n  ON REPLACE(REPLACE(REPLACE(c.[CPF], '.', ''), '-', ''), ' ', '') = \n     REPLACE(REPLACE(REPLACE(r.[CPF], '.', ''), '-', ''), ' ', '')\nWHERE 1=1\n`;\n\n// === FILTROS DINÂMICOS ===\nif (filtros.tipo_custo && filtros.tipo_custo !== 'todas') {\n  // Filtra diretamente pelo Tipo_Custo da VIEW\n  query += ` AND r.[Descrição_Natureza_Rubrica] IN (\n    SELECT [Descrição_Natureza_Rubrica] \n    FROM vw_Rubricas_Classificadas \n    WHERE [Tipo_Custo] = '${filtros.tipo_custo.replace(/'/g, \"''\")}'\n  )`;\n  \n  console.log('✅ Filtro aplicado por Tipo_Custo:', filtros.tipo_custo);\n}\n\n// Filtros de estrutura organizacional\nif (filtros.area) query += ` AND c.[Área] = '${filtros.area.replace(/'/g, \"''\")}'`;\nif (filtros.departamento) query += ` AND c.[Departamento] = '${filtros.departamento.replace(/'/g, \"''\")}'`;\nif (filtros.cargo) query += ` AND c.[Cargo] = '${filtros.cargo.replace(/'/g, \"''\")}'`;\nif (filtros.centro_de_custo) query += ` AND c.[Centro_de_Custo] = '${filtros.centro_de_custo.replace(/'/g, \"''\")}'`;\nif (filtros.empresa) query += ` AND c.[Nome_da_Empresa] = '${filtros.empresa.replace(/'/g, \"''\")}'`;\n\n// === FILTRO TEMPORAL ===\nquery += ` AND r.[Mes_ref_folha] BETWEEN '${mesInicio}' AND '${mesFim}'`;\n\n// === OTIMIZAÇÃO FINAL ===\nquery += ` ORDER BY r.[Mes_ref_folha] DESC, c.[Nome], r.[Código_Rubrica];`;\n\n// === LOG PARA DEBUG ===\nconsole.log('Query gerada:', query);\nconsole.log('Filtros recebidos:', filtros);\nconsole.log('Período:', mesInicio, 'a', mesFim);\n\nreturn [{ json: { query, filtrosAplicados: filtros } }];"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1968,-704],"id":"9a62cafe-7ea8-44cd-8639-da532a293f9a","name":"Criar Query"},{"parameters":{"options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenRouter","typeVersion":1,"position":[2416,-480],"id":"8f321671-8d20-47df-a15e-130f79cac433","name":"OpenRouter Chat Model1","credentials":{"openRouterApi":{"id":"o1ywdYlH64cgqSMT","name":"OpenRouter account"}}},{"parameters":{"promptType":"define","text":"=Você é a Mindy, diretora de RH virtual. \nRecebeu o resultado de uma consulta SQL com dados reais da folha e deve explicar de forma clara, curta (máx. 400 caracteres) e em tom profissional.\n\n**CONTEXTO IMPORTANTE:**\n- A consulta SEMPRE retorna os últimos 3 meses (período completo) para análise comparativa\n- Filtros aplicados: {{ $('Criar Query').item.json.filtrosAplicados }}\n- Dados da consulta: {{ $json.$response }}\n\nRegras:\n- Sempre mencione o mês e o período comparativo:\n  + Se o usuário perguntar um mês específico, compare com o total dos últimos 3 meses (incluindo esse).\n  + Se não especificar mês, apresente o total dos últimos 3 meses.\n- Foque na análise comparativa e tendências\n- Sempre mencione o mês e, se houver, o departamento.\n- Para métricas numéricas, arredonde valores e formate em reais (R$ 1.234,00).\n- Se houver mais de 1 linha, resuma com o total e os 3 primeiros destaques (ranking).\n- Não repita o SQL, nem explique o processo técnico.\n- Se não houver resultado, diga: “Não encontrei registros para esse filtro.”\n\nExemplo:\nEntrada:\n[\n  {\"Departamento\": \"Operações\", \"Valor\": 42000},\n  {\"Departamento\": \"Vendas\", \"Valor\": 27000}\n]\n\nSaída:\n\"Em setembro/2025, o maior gasto foi em Operações (R$ 42 mil), seguido por Vendas (R$ 27 mil).\"\n\nEntrada:\n[\n  {\"Mes\": \"out/2025\", \"Departamento\": \"TI\", \"Valor\": 6800},\n  {\"Mes\": \"out/2025\", \"Departamento\": \"Operações\", \"Valor\": 5100},\n  {\"Mes\": \"out/2025\", \"Departamento\": \"Comercial\", \"Valor\": 3300},\n  {\"Periodo\": \"ago-out/2025\", \"Total\": 15200}\n]\n\nSaída:\n“Em out/2025, o gasto total foi de R$ 8,4 mil, comparado a R$ 15,2 mil no período de ago a out/2025. Principais áreas: TI (R$ 6,8 mil), Operações (R$ 5,1 mil) e Comercial (R$ 3,3 mil).”","options":{}},"type":"@n8n/n8n-nodes-langchain.agent","typeVersion":2.1,"position":[2416,-704],"id":"0848e062-dfca-4083-beed-246caae858a6","name":"Analisar e Gerar Resposta"},{"parameters":{"assignments":{"assignments":[{"id":"4545f892-fbda-4554-bcdf-29a5962450b1","name":"pergunta","value":"Quanto gastamos de horas extras esse mes?","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-96,-912],"id":"a6a4abe3-9d76-48b9-b2af-39ddee8293d0","name":"Edit Fields"},{"parameters":{"operation":"executeQuery","query":"SELECT DISTINCT\n  [Código_Rubrica],\n  [Descrição_Rubrica],\n  [Descrição_Natureza_Rubrica]\nFROM [RhTech_fake_Rubricas]\nORDER BY\n  [Código_Rubrica],\n  [Descrição_Rubrica],\n  [Descrição_Natureza_Rubrica];\n"},"type":"n8n-nodes-base.microsoftSql","typeVersion":1.1,"position":[2176,-1104],"id":"7d35369c-391b-453d-b43c-677e7a02d8a5","name":"Executar Query1","credentials":{"microsoftSql":{"id":"WFNrTNj4QqdUC7Gb","name":"Azure - BMS"}}},{"parameters":{"operation":"executeQuery","query":"SELECT DISTINCT\n    --[Cargo]\n    --[Departamento]\n    --[Centro_de_Custo]\n    --[Área]\n    [Nome_da_Empresa]\nFROM [RhTech_fake_Colaboradores]\n"},"type":"n8n-nodes-base.microsoftSql","typeVersion":1.1,"position":[1968,-1104],"id":"4cafd7a0-4bd2-4d4f-ac82-606241c5d1c9","name":"Executar Query2","credentials":{"microsoftSql":{"id":"WFNrTNj4QqdUC7Gb","name":"Azure - BMS"}}},{"parameters":{"documentId":{"__rl":true,"value":"1leHKDnmforhDH0-mHFkwwYlmKg3vKwhZTf09BvhGqx0","mode":"list","cachedResultName":"depara_rubricas_folha_pagamento","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1leHKDnmforhDH0-mHFkwwYlmKg3vKwhZTf09BvhGqx0/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":"gid=0","mode":"list","cachedResultName":"rubricas","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1leHKDnmforhDH0-mHFkwwYlmKg3vKwhZTf09BvhGqx0/edit#gid=0"},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.6,"position":[704,-1168],"id":"9a141b17-987f-4744-beca-8c36092dd5c4","name":"rubricas","credentials":{"googleSheetsOAuth2Api":{"id":"de8CYZ2v6bGWBjAX","name":"Google Sheets - lucas@getmia.com.br"}}},{"parameters":{"documentId":{"__rl":true,"value":"1leHKDnmforhDH0-mHFkwwYlmKg3vKwhZTf09BvhGqx0","mode":"list","cachedResultName":"depara_rubricas_folha_pagamento","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1leHKDnmforhDH0-mHFkwwYlmKg3vKwhZTf09BvhGqx0/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":1086466239,"mode":"list","cachedResultName":"empresas","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1leHKDnmforhDH0-mHFkwwYlmKg3vKwhZTf09BvhGqx0/edit#gid=1086466239"},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.6,"position":[704,-992],"id":"56fe9830-f183-4a3e-b61b-5096b21be991","name":"empresas","credentials":{"googleSheetsOAuth2Api":{"id":"de8CYZ2v6bGWBjAX","name":"Google Sheets - lucas@getmia.com.br"}}},{"parameters":{"documentId":{"__rl":true,"value":"1leHKDnmforhDH0-mHFkwwYlmKg3vKwhZTf09BvhGqx0","mode":"list","cachedResultName":"depara_rubricas_folha_pagamento","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1leHKDnmforhDH0-mHFkwwYlmKg3vKwhZTf09BvhGqx0/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":346942308,"mode":"list","cachedResultName":"areas","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1leHKDnmforhDH0-mHFkwwYlmKg3vKwhZTf09BvhGqx0/edit#gid=346942308"},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.6,"position":[704,-816],"id":"47359f26-64c6-433c-9163-05d5be7ba5f7","name":"areas","credentials":{"googleSheetsOAuth2Api":{"id":"de8CYZ2v6bGWBjAX","name":"Google Sheets - lucas@getmia.com.br"}}},{"parameters":{"documentId":{"__rl":true,"value":"1leHKDnmforhDH0-mHFkwwYlmKg3vKwhZTf09BvhGqx0","mode":"list","cachedResultName":"depara_rubricas_folha_pagamento","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1leHKDnmforhDH0-mHFkwwYlmKg3vKwhZTf09BvhGqx0/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":761659075,"mode":"list","cachedResultName":"departamentos","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1leHKDnmforhDH0-mHFkwwYlmKg3vKwhZTf09BvhGqx0/edit#gid=761659075"},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.6,"position":[704,-640],"id":"c4884671-5dd9-4ce7-93ca-c0c4bd780a87","name":"departamentos","credentials":{"googleSheetsOAuth2Api":{"id":"de8CYZ2v6bGWBjAX","name":"Google Sheets - lucas@getmia.com.br"}}},{"parameters":{"documentId":{"__rl":true,"value":"1leHKDnmforhDH0-mHFkwwYlmKg3vKwhZTf09BvhGqx0","mode":"list","cachedResultName":"depara_rubricas_folha_pagamento","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1leHKDnmforhDH0-mHFkwwYlmKg3vKwhZTf09BvhGqx0/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":1934165408,"mode":"list","cachedResultName":"centro_de_custo","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1leHKDnmforhDH0-mHFkwwYlmKg3vKwhZTf09BvhGqx0/edit#gid=1934165408"},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.6,"position":[704,-464],"id":"de4972a1-836e-44ca-97f4-62f48c7a72ea","name":"centro_de_custo","credentials":{"googleSheetsOAuth2Api":{"id":"de8CYZ2v6bGWBjAX","name":"Google Sheets - lucas@getmia.com.br"}}},{"parameters":{"documentId":{"__rl":true,"value":"1leHKDnmforhDH0-mHFkwwYlmKg3vKwhZTf09BvhGqx0","mode":"list","cachedResultName":"depara_rubricas_folha_pagamento","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1leHKDnmforhDH0-mHFkwwYlmKg3vKwhZTf09BvhGqx0/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":1112723933,"mode":"list","cachedResultName":"cargos","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1leHKDnmforhDH0-mHFkwwYlmKg3vKwhZTf09BvhGqx0/edit#gid=1112723933"},"options":{}},"type":"n8n-nodes-base.googleSheets","typeVersion":4.6,"position":[704,-304],"id":"306cd80a-30c9-40c3-aa21-e145962ed3d7","name":"cargos","credentials":{"googleSheetsOAuth2Api":{"id":"de8CYZ2v6bGWBjAX","name":"Google Sheets - lucas@getmia.com.br"}}},{"parameters":{"numberInputs":6},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[1152,-768],"id":"ce4546fa-0b2a-46fd-9a88-ee51b5cbb72f","name":"Merge"},{"parameters":{"jsCode":"// --- Captura dados das planilhas (vindos dos nodes anteriores)\nconst parametros_folha = {\n  rubricas: $('rubricas').all().map(item => item.json),\n  empresas: $('empresas').all().map(item => item.json),\n  areas: $('areas').all().map(item => item.json),\n  departamentos: $('departamentos').all().map(item => item.json),\n  centro_de_custo: $('centro_de_custo').all().map(item => item.json),\n  cargos: $('cargos').all().map(item => item.json)\n};\n\n// --- Captura a pergunta (de Edit Fields ou Trigger)\nlet pergunta = null;\n\ntry {\n  pergunta =\n    $('Edit Fields').first().json.pergunta ||\n    $('trigger').first().json.pergunta ||\n    null;\n} catch (e) {\n  pergunta = null;\n}\n\n// --- Retorna JSON consolidado\nreturn [\n  {\n    json: {\n      pergunta,\n      parametros_folha\n    }\n  }\n];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1360,-704],"id":"c9a01fd1-1626-4a7f-843e-d041e1c8dc58","name":"Code"},{"parameters":{},"type":"n8n-nodes-base.noOp","typeVersion":1,"position":[176,-736],"id":"cc3bd75e-c002-4437-b9f2-7f5ec4185a20","name":"No Operation, do nothing"},{"parameters":{"operation":"executeQuery","query":"CREATE VIEW vw_Rubricas_Classificadas AS\nSELECT \n    r.[Código_Rubrica],\n    r.[Descrição_Rubrica],\n    r.[Descrição_Natureza_Rubrica],\n    CASE \n        -- Horas Extras e Adicionais\n        WHEN r.[Descrição_Rubrica] LIKE '%HORA%EXTRA%' OR \n             r.[Descrição_Rubrica] LIKE '%BANCO%HORA%' OR\n             r.[Descrição_Rubrica] LIKE '%SOBREAVISO%' OR\n             r.[Descrição_Rubrica] LIKE '%ADICIONAL%' OR\n             r.[Descrição_Rubrica] LIKE '%NOTURNO%' OR\n             r.[Descrição_Rubrica] LIKE '%INSALUBRIDADE%' OR\n             r.[Descrição_Rubrica] LIKE '%PERICULOSIDADE%'\n        THEN 'Horas Extras e Adicionais'\n        \n        -- Salário\n        WHEN r.[Descrição_Rubrica] LIKE '%SALARI%' OR\n             r.[Descrição_Rubrica] LIKE '%HORA%NORMA%' OR\n             r.[Descrição_Rubrica] LIKE '%DIAS%TRABALHADO%' OR\n             r.[Descrição_Rubrica] LIKE '%PRO-LABORE%' OR\n             r.[Descrição_Rubrica] LIKE '%QUEBRA%CAIXA%'\n        THEN 'Salário'\n        \n        -- Comissões, Gratificações e Premiações\n        WHEN r.[Descrição_Rubrica] LIKE '%COMISS%' OR\n             r.[Descrição_Rubrica] LIKE '%GRATIFIC%' OR\n             r.[Descrição_Rubrica] LIKE '%PREMI%' OR\n             r.[Descrição_Rubrica] LIKE '%PRODUTIVIDADE%'\n        THEN 'Comissões, Gratificações e Premiações'\n        \n        -- Férias\n        WHEN r.[Descrição_Rubrica] LIKE '%FERIAS%'\n        THEN 'Férias'\n        \n        -- 13º Salário\n        WHEN r.[Descrição_Rubrica] LIKE '%13%SALARIO%' OR\n             r.[Descrição_Rubrica] LIKE '%13º%'\n        THEN '13 salário'\n        \n        -- Rescisão\n        WHEN r.[Descrição_Rubrica] LIKE '%RESCIS%' OR\n             r.[Descrição_Rubrica] LIKE '%AVISO%PREVIO%'\n        THEN 'Rescisão'\n        \n        -- Afastamento\n        WHEN r.[Descrição_Rubrica] LIKE '%ATESTADO%' OR\n             r.[Descrição_Rubrica] LIKE '%LICENCA%'\n        THEN 'Afastamento'\n        \n        -- Descontos\n        WHEN r.[Descrição_Rubrica] LIKE '%REEMBOLSO%' OR\n             r.[Descrição_Rubrica] LIKE '%DESC%'\n        THEN 'Descontos'\n        \n        -- DSR\n        WHEN r.[Descrição_Rubrica] LIKE '%DSR%'\n        THEN 'Horas Extras e Adicionais'\n        \n        ELSE 'Outros'\n    END AS Tipo_Custo\n    \nFROM [RhTech_fake_Rubricas] r;"},"type":"n8n-nodes-base.microsoftSql","typeVersion":1.1,"position":[1760,-1104],"id":"e37b73b1-beb2-4049-ab32-66f2c1b43e86","name":"Cria View com as Rubricas adequadas","credentials":{"microsoftSql":{"id":"WFNrTNj4QqdUC7Gb","name":"Azure - BMS"}}},{"parameters":{"numberInputs":6},"type":"n8n-nodes-base.merge","typeVersion":3.2,"position":[1200,-2080],"id":"a7e47afa-adfb-405b-b702-d9c4c1c1a2f1","name":"Merge1"},{"parameters":{"jsCode":"// --- Captura dados das planilhas (vindos dos nodes anteriores)\nconst parametros_folha = {\n  rubricas: $('Buscar Rubricas Classificadas').all().map(item => item.json),\n  empresas: $('Buscar Empresas').all().map(item => item.json),\n  areas: $('Buscar Áreas').all().map(item => item.json),\n  departamentos: $('Buscar Departamentos').all().map(item => item.json),\n  centro_de_custo: $('Buscar Centros de Custo').all().map(item => item.json),\n  cargos: $('Buscar Cargos').all().map(item => item.json)\n};\n\n// --- Captura a pergunta (de Edit Fields ou Trigger)\nlet pergunta = null;\n\ntry {\n  pergunta =\n    $('Definir Pergunta Manual').first().json.pergunta ||\n    $('Trigger').first().json.pergunta ||\n    null;\n} catch (e) {\n  pergunta = null;\n}\n\n// --- Retorna JSON consolidado\nreturn [\n  {\n    json: {\n      pergunta,\n      parametros_folha\n    }\n  }\n];\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1488,-2016],"id":"dbf2c410-f8df-49f9-b485-bb597b7b61e0","name":"Consolidar Parâmetros e Pergunta"},{"parameters":{"operation":"executeQuery","query":"-- Buscar apenas tipos de custo únicos (em vez de 300k registros)\nSELECT DISTINCT [Tipo_Custo] \nFROM vw_Rubricas_Classificadas \nWHERE [Tipo_Custo] IS NOT NULL \nORDER BY [Tipo_Custo];"},"type":"n8n-nodes-base.microsoftSql","typeVersion":1.1,"position":[688,-2624],"id":"fe1d0dba-ebfa-4aec-b9b8-0930f033d1da","name":"Buscar Rubricas Classificadas","credentials":{"microsoftSql":{"id":"WFNrTNj4QqdUC7Gb","name":"Azure - BMS"}}},{"parameters":{"operation":"executeQuery","query":"SELECT DISTINCT [Nome_da_Empresa] \nFROM [RhTech_fake_Colaboradores] \nWHERE [Nome_da_Empresa] IS NOT NULL \nORDER BY [Nome_da_Empresa];"},"type":"n8n-nodes-base.microsoftSql","typeVersion":1.1,"position":[688,-2400],"id":"2cefdb2d-c944-4e94-b0ca-cb2fee8b3e18","name":"Buscar Empresas","credentials":{"microsoftSql":{"id":"WFNrTNj4QqdUC7Gb","name":"Azure - BMS"}}},{"parameters":{"operation":"executeQuery","query":"SELECT DISTINCT [Área] \nFROM [RhTech_fake_Colaboradores] \nWHERE [Área] IS NOT NULL \nORDER BY [Área];\n"},"type":"n8n-nodes-base.microsoftSql","typeVersion":1.1,"position":[688,-2176],"id":"52f9261d-534c-4852-974e-4d6ddd5373b5","name":"Buscar Áreas","credentials":{"microsoftSql":{"id":"WFNrTNj4QqdUC7Gb","name":"Azure - BMS"}}},{"parameters":{"operation":"executeQuery","query":"SELECT DISTINCT [Departamento] \nFROM [RhTech_fake_Colaboradores] \nWHERE [Departamento] IS NOT NULL \nORDER BY [Departamento];"},"type":"n8n-nodes-base.microsoftSql","typeVersion":1.1,"position":[688,-1968],"id":"34712d74-7a39-4f71-b20d-59fac43abc76","name":"Buscar Departamentos","credentials":{"microsoftSql":{"id":"WFNrTNj4QqdUC7Gb","name":"Azure - BMS"}}},{"parameters":{"operation":"executeQuery","query":"SELECT DISTINCT [Centro_de_Custo] \nFROM [RhTech_fake_Colaboradores] \nWHERE [Centro_de_Custo] IS NOT NULL \nORDER BY [Centro_de_Custo];"},"type":"n8n-nodes-base.microsoftSql","typeVersion":1.1,"position":[688,-1744],"id":"6923dd9f-5c21-446a-9715-7d37d64846ca","name":"Buscar Centros de Custo","credentials":{"microsoftSql":{"id":"WFNrTNj4QqdUC7Gb","name":"Azure - BMS"}}},{"parameters":{"operation":"executeQuery","query":"SELECT DISTINCT [Cargo] \nFROM [RhTech_fake_Colaboradores] \nWHERE [Cargo] IS NOT NULL \nORDER BY [Cargo];"},"type":"n8n-nodes-base.microsoftSql","typeVersion":1.1,"position":[688,-1520],"id":"71455db8-1e59-4c65-a512-e686f1eec5fd","name":"Buscar Cargos","credentials":{"microsoftSql":{"id":"WFNrTNj4QqdUC7Gb","name":"Azure - BMS"}}},{"parameters":{"assignments":{"assignments":[{"id":"4545f892-fbda-4554-bcdf-29a5962450b1","name":"pergunta","value":"Quanto gastamos de horas extras esse mes?","type":"string"}]},"options":{}},"type":"n8n-nodes-base.set","typeVersion":3.4,"position":[-96,-1936],"id":"7a7b0731-49ff-45f8-a8c5-c9f70dca9962","name":"Definir Pergunta Manual"},{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[1824,-480],"id":"c34e27ac-b7db-4f90-9d5b-d5f060cdc07c","name":"Trigger"},{"parameters":{"operation":"executeQuery","query":"-- Buscar TODAS as tabelas disponíveis (para ver o que existe)\nSELECT \n    TABLE_SCHEMA,\n    TABLE_NAME,\n    TABLE_TYPE\nFROM INFORMATION_SCHEMA.TABLES \nORDER BY TABLE_SCHEMA, TABLE_NAME;"},"type":"n8n-nodes-base.microsoftSql","typeVersion":1.1,"position":[2400,-1104],"id":"8f910e9c-a721-486a-8e73-4fe69cb6ab01","name":"Ver todas as tabelas no banco atual","credentials":{"microsoftSql":{"id":"WFNrTNj4QqdUC7Gb","name":"Azure - BMS"}}},{"parameters":{},"type":"@n8n/n8n-nodes-langchain.toolCalculator","typeVersion":1,"position":[2608,-480],"id":"7322ac87-3056-45a5-a06d-0ccf3e6abf18","name":"Calculator"},{"parameters":{"operation":"executeQuery","query":"SELECT \n    [Código_Rubrica],\n    [Descrição_Rubrica],\n    [Descrição_Natureza_Rubrica],\n    [Tipo_Custo]\nFROM vw_Rubricas_Classificadas\nORDER BY [Código_Rubrica];"},"type":"n8n-nodes-base.microsoftSql","typeVersion":1.1,"position":[1088,-2672],"id":"0fb85ebd-342b-4ee0-8251-3274b46f735a","name":"Buscar Rubricas Classificadas1","credentials":{"microsoftSql":{"id":"WFNrTNj4QqdUC7Gb","name":"Azure - BMS"}},"disabled":true},{"parameters":{"jsCode":"// Processar os resultados otimizados\nconst rawData = $('Buscar Parametros Otimizados').first().json;\n\nconst parametros_folha = {\n  rubricas: JSON.parse(rawData.tipos_custo || '[]').map(tipo => ({ \n    Tipo_Custo: tipo.Tipo_Custo \n  })),\n  empresas: JSON.parse(rawData.empresas || '[]').map(emp => ({\n    Nome_da_Empresa: emp.Nome_da_Empresa\n  })),\n  areas: JSON.parse(rawData.areas || '[]').map(area => ({\n    Área: area.Área\n  })),\n  departamentos: JSON.parse(rawData.departamentos || '[]').map(depto => ({\n    departamentos: depto.Departamento\n  })),\n  centro_de_custo: JSON.parse(rawData.centros_custo || '[]').map(cc => ({\n    Centro_de_Custo: cc.Centro_de_Custo\n  })),\n  cargos: JSON.parse(rawData.cargos || '[]').map(cargo => ({\n    cargos: cargo.Cargo\n  }))\n};"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[336,-1360],"id":"20be992b-fcd8-49fc-989e-6c662cd5e911","name":"Consolidar Parâmetros e Pergunta1"},{"parameters":{"operation":"executeQuery","query":"SELECT \n  (SELECT DISTINCT [Tipo_Custo] FROM vw_Rubricas_Classificadas WHERE [Tipo_Custo] IS NOT NULL FOR JSON PATH) as tipos_custo,\n  (SELECT DISTINCT [Nome_da_Empresa] FROM [RhTech_fake_Colaboradores] WHERE [Nome_da_Empresa] IS NOT NULL FOR JSON PATH) as empresas,\n  (SELECT DISTINCT [Área] FROM [RhTech_fake_Colaboradores] WHERE [Área] IS NOT NULL FOR JSON PATH) as areas,\n  (SELECT DISTINCT [Departamento] FROM [RhTech_fake_Colaboradores] WHERE [Departamento] IS NOT NULL FOR JSON PATH) as departamentos,\n  (SELECT DISTINCT [Centro_de_Custo] FROM [RhTech_fake_Colaboradores] WHERE [Centro_de_Custo] IS NOT NULL FOR JSON PATH) as centros_custo,\n  (SELECT DISTINCT [Cargo] FROM [RhTech_fake_Colaboradores] WHERE [Cargo] IS NOT NULL FOR JSON PATH) as cargos;"},"type":"n8n-nodes-base.microsoftSql","typeVersion":1.1,"position":[128,-1376],"id":"4b18173c-c124-438a-8c79-e79e1358871f","name":"Buscar Parametros Otimizados","credentials":{"microsoftSql":{"id":"WFNrTNj4QqdUC7Gb","name":"Azure - BMS"}}}],"connections":{"trigger":{"main":[[]]},"OpenRouter Chat Model":{"ai_languageModel":[[{"node":"Interpretar pergunta","type":"ai_languageModel","index":0}]]},"Interpretar pergunta":{"main":[[{"node":"Criar Query","type":"main","index":0}]]},"Executar Query":{"main":[[{"node":"Analisar e Gerar Resposta","type":"main","index":0}]]},"Criar Query":{"main":[[{"node":"Executar Query","type":"main","index":0}]]},"OpenRouter Chat Model1":{"ai_languageModel":[[{"node":"Analisar e Gerar Resposta","type":"ai_languageModel","index":0}]]},"Edit Fields":{"main":[[{"node":"No Operation, do nothing","type":"main","index":0}]]},"Executar Query1":{"main":[[]]},"rubricas":{"main":[[{"node":"Merge","type":"main","index":0}]]},"empresas":{"main":[[{"node":"Merge","type":"main","index":1}]]},"areas":{"main":[[{"node":"Merge","type":"main","index":2}]]},"departamentos":{"main":[[{"node":"Merge","type":"main","index":3}]]},"centro_de_custo":{"main":[[{"node":"Merge","type":"main","index":4}]]},"cargos":{"main":[[{"node":"Merge","type":"main","index":5}]]},"Merge":{"main":[[{"node":"Code","type":"main","index":0}]]},"Code":{"main":[[{"node":"Interpretar pergunta","type":"main","index":0}]]},"No Operation, do nothing":{"main":[[{"node":"rubricas","type":"main","index":0},{"node":"empresas","type":"main","index":0},{"node":"areas","type":"main","index":0},{"node":"departamentos","type":"main","index":0},{"node":"centro_de_custo","type":"main","index":0},{"node":"cargos","type":"main","index":0}]]},"Merge1":{"main":[[{"node":"Consolidar Parâmetros e Pergunta","type":"main","index":0}]]},"Buscar Rubricas Classificadas":{"main":[[{"node":"Merge1","type":"main","index":0}]]},"Buscar Empresas":{"main":[[{"node":"Merge1","type":"main","index":1}]]},"Buscar Áreas":{"main":[[{"node":"Merge1","type":"main","index":2}]]},"Buscar Departamentos":{"main":[[{"node":"Merge1","type":"main","index":3}]]},"Buscar Centros de Custo":{"main":[[{"node":"Merge1","type":"main","index":4}]]},"Buscar Cargos":{"main":[[{"node":"Merge1","type":"main","index":5}]]},"Definir Pergunta Manual":{"main":[[{"node":"Buscar Rubricas Classificadas","type":"main","index":0},{"node":"Buscar Empresas","type":"main","index":0},{"node":"Buscar Áreas","type":"main","index":0},{"node":"Buscar Departamentos","type":"main","index":0},{"node":"Buscar Centros de Custo","type":"main","index":0},{"node":"Buscar Cargos","type":"main","index":0}]]},"Trigger":{"main":[[{"node":"Interpretar pergunta","type":"main","index":0}]]},"Calculator":{"ai_tool":[[{"node":"Analisar e Gerar Resposta","type":"ai_tool","index":0}]]},"Buscar Parametros Otimizados":{"main":[[{"node":"Consolidar Parâmetros e Pergunta1","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":{"templateCredsSetupCompleted":true},"pinData":{"Interpretar pergunta":[{"json":{"output":"{\n  \"mes_inicio\": \"2025-08\",\n  \"mes_fim\": \"2025-10\",\n  \"tipo_custo\": \"Horas Extras e Adicionais\",\n  \"area\": null,\n  \"departamento\": null,\n  \"centro_de_custo\": null,\n  \"cargo\": null,\n  \"empresa\": null,\n  \"metrica\": \"total_gasto\",\n  \"periodo_comparativo\": null\n}"}}],"Code":[{"json":{"pergunta":"Quanto gastamos de horas extras esse mes?","parametros_folha":{"rubricas":[{"row_number":2,"Código_Rubrica":1,"Descrição_Rubrica":"HORAS NORMAIS","Descrição_Natureza_Rubrica":"Salário, vencimento, soldo","tipo_custo":"Salário"},{"row_number":3,"Código_Rubrica":1001,"Descrição_Rubrica":"PRO-LABORE DIRETORES NAO EMPREGADOS","Descrição_Natureza_Rubrica":"Retiradas (pró-labore) de diretores não empregados","tipo_custo":"Salário"},{"row_number":4,"Código_Rubrica":1003,"Descrição_Rubrica":"RPA - RECIBO PAGAMENTO AUTONOMO","Descrição_Natureza_Rubrica":"Remuneração por prestação de serviços","tipo_custo":"Salário"},{"row_number":5,"Código_Rubrica":102,"Descrição_Rubrica":"AD. QUEBRA DE CAIXA MES ANTERIOR","Descrição_Natureza_Rubrica":"Quebra de caixa","tipo_custo":"Salário"},{"row_number":6,"Código_Rubrica":1023,"Descrição_Rubrica":"GRATIFICACAO","Descrição_Natureza_Rubrica":"Gratificações","tipo_custo":"Comissões, Gratificações e Premiações"},{"row_number":7,"Código_Rubrica":1040,"Descrição_Rubrica":"HORAS EXTRAS 50 IMPERIOSAS NOTURNAS","Descrição_Natureza_Rubrica":"Horas extraordinárias","tipo_custo":"Horas Extras e Adicionais"},{"row_number":8,"Código_Rubrica":1041,"Descrição_Rubrica":"HORAS EXTRAS 50 IMPERIOSAS","Descrição_Natureza_Rubrica":"Horas extraordinárias","tipo_custo":"Horas Extras e Adicionais"},{"row_number":9,"Código_Rubrica":105,"Descrição_Rubrica":"DIF. FERIAS MES ANTERIOR","Descrição_Natureza_Rubrica":"(vazio)","tipo_custo":"Férias"},{"row_number":10,"Código_Rubrica":106,"Descrição_Rubrica":"DIF. 1/3 FERIAS MES ANTERIOR","Descrição_Natureza_Rubrica":"(vazio)","tipo_custo":"Férias"},{"row_number":11,"Código_Rubrica":1061,"Descrição_Rubrica":"DIF. SALARIAL C/ INCIDENCIA","Descrição_Natureza_Rubrica":"Outras verbas salariais","tipo_custo":"Salário"},{"row_number":12,"Código_Rubrica":1062,"Descrição_Rubrica":"DIF. DIA DE SALARIO ART 64","Descrição_Natureza_Rubrica":"Salário, vencimento, soldo","tipo_custo":"Salário"},{"row_number":13,"Código_Rubrica":1080,"Descrição_Rubrica":"ADIC QUEBRA DE CAIXA SUBSTITUICAO","Descrição_Natureza_Rubrica":"Quebra de caixa","tipo_custo":"Salário"},{"row_number":14,"Código_Rubrica":1107,"Descrição_Rubrica":"DIF. FERIAS PAGAS NO MES","Descrição_Natureza_Rubrica":"(vazio)","tipo_custo":"Férias"},{"row_number":15,"Código_Rubrica":112,"Descrição_Rubrica":"LICENCA REMUNERADA (FERIAS COLETIVAS)","Descrição_Natureza_Rubrica":"Remuneração de dias de afastamento","tipo_custo":"Férias"},{"row_number":16,"Código_Rubrica":1136,"Descrição_Rubrica":"SALARIO POR SUSBTITUICAO","Descrição_Natureza_Rubrica":"Outras verbas salariais","tipo_custo":"Salário"},{"row_number":17,"Código_Rubrica":1142,"Descrição_Rubrica":"DIF. HORAS DE SOBREAVISO","Descrição_Natureza_Rubrica":"Sobreaviso e prontidão","tipo_custo":"Horas Extras e Adicionais"},{"row_number":18,"Código_Rubrica":116,"Descrição_Rubrica":"DIF. SALARIAL RESCISAO","Descrição_Natureza_Rubrica":"Saldo de salários na rescisão contratual","tipo_custo":"Rescisão"},{"row_number":19,"Código_Rubrica":117,"Descrição_Rubrica":"DIF. 13 SALARIO RCT","Descrição_Natureza_Rubrica":"13° salário proporcional na rescisão","tipo_custo":"13 salário"},{"row_number":20,"Código_Rubrica":119,"Descrição_Rubrica":"DIF. AVISO PREVIO / API","Descrição_Natureza_Rubrica":"Indenização compensatória do aviso-prévio","tipo_custo":"Rescisão"},{"row_number":21,"Código_Rubrica":129,"Descrição_Rubrica":"2 PARCELA 13 SALARIO","Descrição_Natureza_Rubrica":"13º salário","tipo_custo":"13 salário"},{"row_number":22,"Código_Rubrica":145,"Descrição_Rubrica":"ATESTADO MEDICO (PREVIDENCIA) (D)","Descrição_Natureza_Rubrica":"Remuneração de dias de afastamento","tipo_custo":"Afastamento"},{"row_number":23,"Código_Rubrica":146,"Descrição_Rubrica":"REEMBOLSO DESC. FALTAS","Descrição_Natureza_Rubrica":"Ressarcimento de outras despesas","tipo_custo":"Descontos"},{"row_number":24,"Código_Rubrica":151,"Descrição_Rubrica":"DIF. ADICIONAL DE INSALUBRIDADE","Descrição_Natureza_Rubrica":"Adicional de insalubridade","tipo_custo":"Horas Extras e Adicionais"},{"row_number":25,"Código_Rubrica":160,"Descrição_Rubrica":"ATESTADO MEDICO INCIDENCIA SEGURADO","Descrição_Natureza_Rubrica":"Remuneração de dias de afastamento","tipo_custo":"Afastamento"},{"row_number":26,"Código_Rubrica":173,"Descrição_Rubrica":"( ) PAGTO. BANCO HORAS S/ACRESC","Descrição_Natureza_Rubrica":"Horas extraordinárias - Indenização de banco de horas","tipo_custo":"Horas Extras e Adicionais"},{"row_number":27,"Código_Rubrica":2,"Descrição_Rubrica":"DIAS TRABALHADOS","Descrição_Natureza_Rubrica":"Salário, vencimento, soldo","tipo_custo":"Salário"},{"row_number":28,"Código_Rubrica":215,"Descrição_Rubrica":"ATESTADO MEDICO (PREVIDENCIA) (H)","Descrição_Natureza_Rubrica":"Remuneração de dias de afastamento","tipo_custo":"Afastamento"},{"row_number":29,"Código_Rubrica":23,"Descrição_Rubrica":"ADIC DE PERICULOSIDADE","Descrição_Natureza_Rubrica":"Adicional de periculosidade","tipo_custo":"Horas Extras e Adicionais"},{"row_number":30,"Código_Rubrica":239,"Descrição_Rubrica":"COMISSAO COMPL","Descrição_Natureza_Rubrica":"Comissões, porcentagens, produção","tipo_custo":"Comissões, Gratificações e Premiações"},{"row_number":31,"Código_Rubrica":290,"Descrição_Rubrica":"DSR S/COMISSAO COMPL","Descrição_Natureza_Rubrica":"Descanso semanal remunerado - DSR","tipo_custo":"Comissões, Gratificações e Premiações"},{"row_number":32,"Código_Rubrica":323,"Descrição_Rubrica":"DIF. ADICIONAL DE PERICULOSIDADE","Descrição_Natureza_Rubrica":"Adicional de periculosidade","tipo_custo":"Horas Extras e Adicionais"},{"row_number":33,"Código_Rubrica":37,"Descrição_Rubrica":"DIF. SALARIAL S/ INCIDENCIA","Descrição_Natureza_Rubrica":"Outras verbas salariais","tipo_custo":"Salário"},{"row_number":34,"Código_Rubrica":38,"Descrição_Rubrica":"DIAS DE FERIAS (RECIBO)","Descrição_Natureza_Rubrica":"(vazio)","tipo_custo":"Férias"},{"row_number":35,"Código_Rubrica":405,"Descrição_Rubrica":"PRODUTIVIDADE","Descrição_Natureza_Rubrica":"Prêmios","tipo_custo":"Comissões, Gratificações e Premiações"},{"row_number":36,"Código_Rubrica":407,"Descrição_Rubrica":"ADICIONAL DE INSALUBRIDADE 20","Descrição_Natureza_Rubrica":"Adicional de insalubridade","tipo_custo":"Horas Extras e Adicionais"},{"row_number":37,"Código_Rubrica":408,"Descrição_Rubrica":"ADICIONAL DE INSALUBRIDADE 40","Descrição_Natureza_Rubrica":"Adicional de insalubridade","tipo_custo":"Horas Extras e Adicionais"},{"row_number":38,"Código_Rubrica":41,"Descrição_Rubrica":"FERIAS NO MES","Descrição_Natureza_Rubrica":"(vazio)","tipo_custo":"Férias"},{"row_number":39,"Código_Rubrica":45,"Descrição_Rubrica":"DIF. FERIAS PAGAS NO MES","Descrição_Natureza_Rubrica":"(vazio)","tipo_custo":"Férias"},{"row_number":40,"Código_Rubrica":495,"Descrição_Rubrica":"COMISSAO","Descrição_Natureza_Rubrica":"Comissões, porcentagens, produção","tipo_custo":"Comissões, Gratificações e Premiações"},{"row_number":41,"Código_Rubrica":498,"Descrição_Rubrica":"AD. QUEBRA DE CAIXA 10","Descrição_Natureza_Rubrica":"Quebra de caixa","tipo_custo":"Salário"},{"row_number":42,"Código_Rubrica":526,"Descrição_Rubrica":"ADICIONAL NOTURNO 20","Descrição_Natureza_Rubrica":"Adicional noturno","tipo_custo":"Horas Extras e Adicionais"},{"row_number":43,"Código_Rubrica":527,"Descrição_Rubrica":"DIF. ADICIONAL NOTURNO 20","Descrição_Natureza_Rubrica":"Adicional noturno","tipo_custo":"Horas Extras e Adicionais"},{"row_number":44,"Código_Rubrica":545,"Descrição_Rubrica":"( ) PAGTO. BANCO HORAS ACRESC 50","Descrição_Natureza_Rubrica":"Horas extraordinárias - Indenização de banco de horas","tipo_custo":"Horas Extras e Adicionais"},{"row_number":45,"Código_Rubrica":546,"Descrição_Rubrica":"DIF. () SALDO BANCO DE HORAS","Descrição_Natureza_Rubrica":"Horas extraordinárias - Indenização de banco de horas","tipo_custo":"Horas Extras e Adicionais"},{"row_number":46,"Código_Rubrica":550,"Descrição_Rubrica":"HORAS DE SOBREAVISO","Descrição_Natureza_Rubrica":"Sobreaviso e prontidão","tipo_custo":"Horas Extras e Adicionais"},{"row_number":47,"Código_Rubrica":650,"Descrição_Rubrica":"HORAS EXTRAS 50","Descrição_Natureza_Rubrica":"Horas extraordinárias","tipo_custo":"Horas Extras e Adicionais"},{"row_number":48,"Código_Rubrica":651,"Descrição_Rubrica":"DIF. HORAS EXTRAS 50","Descrição_Natureza_Rubrica":"Horas extraordinárias","tipo_custo":"Horas Extras e Adicionais"},{"row_number":49,"Código_Rubrica":652,"Descrição_Rubrica":"HORAS EXTRAS 50 NOTURNA","Descrição_Natureza_Rubrica":"Horas extraordinárias","tipo_custo":"Horas Extras e Adicionais"},{"row_number":50,"Código_Rubrica":66,"Descrição_Rubrica":"DIF. 13 SALARIO","Descrição_Natureza_Rubrica":"13° salário complementar","tipo_custo":"13 salário"},{"row_number":51,"Código_Rubrica":670,"Descrição_Rubrica":"HORAS EXTRAS 100","Descrição_Natureza_Rubrica":"Horas extraordinárias","tipo_custo":"Horas Extras e Adicionais"},{"row_number":52,"Código_Rubrica":671,"Descrição_Rubrica":"DIF. HORAS EXTRAS 100","Descrição_Natureza_Rubrica":"Horas extraordinárias","tipo_custo":"Horas Extras e Adicionais"},{"row_number":53,"Código_Rubrica":672,"Descrição_Rubrica":"HORAS EXTRAS 100 NOTURNA","Descrição_Natureza_Rubrica":"Horas extraordinárias","tipo_custo":"Horas Extras e Adicionais"},{"row_number":54,"Código_Rubrica":674,"Descrição_Rubrica":"HORAS EXTRAS EM FERIADO","Descrição_Natureza_Rubrica":"Horas extraordinárias","tipo_custo":"Horas Extras e Adicionais"},{"row_number":55,"Código_Rubrica":675,"Descrição_Rubrica":"DIF. HORAS EXTRAS EM FERIADO","Descrição_Natureza_Rubrica":"Horas extraordinárias","tipo_custo":"Horas Extras e Adicionais"},{"row_number":56,"Código_Rubrica":678,"Descrição_Rubrica":"HORAS EXTRAS INTERJORNADA","Descrição_Natureza_Rubrica":"Horas extraordinárias","tipo_custo":"Horas Extras e Adicionais"},{"row_number":57,"Código_Rubrica":679,"Descrição_Rubrica":"DIF. HORAS EXTRAS INTERJORNADA","Descrição_Natureza_Rubrica":"Horas extraordinárias","tipo_custo":"Horas Extras e Adicionais"},{"row_number":58,"Código_Rubrica":683,"Descrição_Rubrica":"DIF. HORAS CADASTRADAS SOBREAVISO","Descrição_Natureza_Rubrica":"Sobreaviso e prontidão","tipo_custo":"Horas Extras e Adicionais"},{"row_number":59,"Código_Rubrica":684,"Descrição_Rubrica":"HORAS SOBRE AVISO NORMAIS EXEC","Descrição_Natureza_Rubrica":"Sobreaviso e prontidão","tipo_custo":"Horas Extras e Adicionais"},{"row_number":60,"Código_Rubrica":685,"Descrição_Rubrica":"DIF. HORAS SOBRE AVISO NORMAIS EXEC","Descrição_Natureza_Rubrica":"Sobreaviso e prontidão","tipo_custo":"Horas Extras e Adicionais"},{"row_number":61,"Código_Rubrica":686,"Descrição_Rubrica":"HORAS SOBRE AVISO DESC. EXEC.","Descrição_Natureza_Rubrica":"Sobreaviso e prontidão","tipo_custo":"Horas Extras e Adicionais"},{"row_number":62,"Código_Rubrica":687,"Descrição_Rubrica":"DIF. HORAS SOBRE AVISO DESC. EXEC.","Descrição_Natureza_Rubrica":"Sobreaviso e prontidão","tipo_custo":"Horas Extras e Adicionais"},{"row_number":63,"Código_Rubrica":688,"Descrição_Rubrica":"HORAS SOBRE AVISO FER. EXEC.","Descrição_Natureza_Rubrica":"Sobreaviso e prontidão","tipo_custo":"Horas Extras e Adicionais"},{"row_number":64,"Código_Rubrica":689,"Descrição_Rubrica":"DIF. HORAS SOBRE AVISO FER. EXEC.","Descrição_Natureza_Rubrica":"Sobreaviso e prontidão","tipo_custo":"Horas Extras e Adicionais"},{"row_number":65,"Código_Rubrica":690,"Descrição_Rubrica":"HORAS SOBRE AVISO COMP. EXEC.","Descrição_Natureza_Rubrica":"Sobreaviso e prontidão","tipo_custo":"Horas Extras e Adicionais"},{"row_number":66,"Código_Rubrica":692,"Descrição_Rubrica":"DSR S/HORAS EXTRAS","Descrição_Natureza_Rubrica":"Descanso semanal remunerado - DSR","tipo_custo":"Horas Extras e Adicionais"},{"row_number":67,"Código_Rubrica":693,"Descrição_Rubrica":"DIF. DSR S/HORAS EXTRAS","Descrição_Natureza_Rubrica":"Descanso semanal remunerado - DSR","tipo_custo":"Horas Extras e Adicionais"},{"row_number":68,"Código_Rubrica":694,"Descrição_Rubrica":"DSR S/ADICIONAL NOTURNO","Descrição_Natureza_Rubrica":"Descanso semanal remunerado - DSR","tipo_custo":"Horas Extras e Adicionais"},{"row_number":69,"Código_Rubrica":695,"Descrição_Rubrica":"DIF. DSR S/ADICIONAL NOTURNO","Descrição_Natureza_Rubrica":"Descanso semanal remunerado - DSR","tipo_custo":"Horas Extras e Adicionais"},{"row_number":70,"Código_Rubrica":696,"Descrição_Rubrica":"DSR S/COMISSAO","Descrição_Natureza_Rubrica":"Descanso semanal remunerado - DSR","tipo_custo":"Comissões, Gratificações e Premiações"},{"row_number":71,"Código_Rubrica":698,"Descrição_Rubrica":"DSR S/PRODUTIVIDADE","Descrição_Natureza_Rubrica":"Descanso semanal remunerado - DSR","tipo_custo":"Comissões, Gratificações e Premiações"},{"row_number":72,"Código_Rubrica":76,"Descrição_Rubrica":"1/3 FERIAS NO MES","Descrição_Natureza_Rubrica":"(vazio)","tipo_custo":"Férias"},{"row_number":73,"Código_Rubrica":79,"Descrição_Rubrica":"DIF. 1/3 FERIAS MES","Descrição_Natureza_Rubrica":"(vazio)","tipo_custo":"Férias"}],"empresas":[{"row_number":2,"Nome_da_Empresa":"TechRH Ltda"},{"row_number":3,"Nome_da_Empresa":"Global Solutions"},{"row_number":4,"Nome_da_Empresa":"RH Brasil"},{"row_number":5,"Nome_da_Empresa":"PeopleCorp"},{"row_number":6,"Nome_da_Empresa":"Inova RH"}],"areas":[{"row_number":2,"Área":"Marketing"},{"row_number":3,"Área":"TI"},{"row_number":4,"Área":"RH"},{"row_number":5,"Área":"Financeiro"},{"row_number":6,"Área":"Comercial"},{"row_number":7,"Área":"Operações"}],"departamentos":[{"row_number":2,"departamentos":"Marketing"},{"row_number":3,"departamentos":"TI"},{"row_number":4,"departamentos":"RH"},{"row_number":5,"departamentos":"Financeiro"},{"row_number":6,"departamentos":"Comercial"},{"row_number":7,"departamentos":"Operações"}],"centro_de_custo":[{"row_number":2,"Centro_de_Custo":"100 – Comercial"},{"row_number":3,"Centro_de_Custo":"100 – Operações"},{"row_number":4,"Centro_de_Custo":"102 – TI"},{"row_number":5,"Centro_de_Custo":"103 – Operações"},{"row_number":6,"Centro_de_Custo":"103 – RH"},{"row_number":7,"Centro_de_Custo":"104 – RH"},{"row_number":8,"Centro_de_Custo":"106 – Marketing"},{"row_number":9,"Centro_de_Custo":"106 – TI"},{"row_number":10,"Centro_de_Custo":"108 – Comercial"},{"row_number":11,"Centro_de_Custo":"111 – Operações"}],"cargos":[{"row_number":2,"cargos":"Gerente"},{"row_number":3,"cargos":"Assistente"},{"row_number":4,"cargos":"Supervisor"},{"row_number":5,"cargos":"Coordenador"},{"row_number":6,"cargos":"Analista"}]}}}]},"versionId":"2be9587f-cbf9-4e67-b3a5-4895b1970b33","triggerCount":0,"tags":[]}