{"createdAt":"2025-09-23T19:52:39.116Z","updatedAt":"2025-09-24T18:06:27.840Z","id":"HJB0JjcgbZlOXF8K","name":"Agentes N8N - Finthrix - Importador de Conta","active":false,"isArchived":false,"nodes":[{"parameters":{"pollTimes":{"item":[{"mode":"everyMinute"}]},"triggerOn":"specificFolder","folderToWatch":{"__rl":true,"value":"1Mi05uIM8DpYTiqEZOriSQMY2Cn4r-PpT","mode":"list","cachedResultName":"Contas e Faturas","cachedResultUrl":"https://drive.google.com/drive/folders/1Mi05uIM8DpYTiqEZOriSQMY2Cn4r-PpT"},"event":"fileCreated","options":{}},"id":"7c3cc0fb-e4f5-4ba4-aa98-5a3849c73950","name":"Lê a pasta Contas e Faturas a cada 1 minuto","type":"n8n-nodes-base.googleDriveTrigger","typeVersion":1,"position":[336,336],"credentials":{"googleDriveOAuth2Api":{"id":"8G4VgOQRG6X5KJnF","name":"Google Drive account"}}},{"parameters":{"operation":"download","fileId":{"__rl":true,"value":"={{ $json.id }}","mode":"id"},"options":{}},"id":"3feacf29-1a54-4365-af76-808f9ed73fb3","name":"Faz o Download da Conta","type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[608,336],"credentials":{"googleDriveOAuth2Api":{"id":"8G4VgOQRG6X5KJnF","name":"Google Drive account"}}},{"parameters":{"operation":"pdf","options":{}},"id":"0ae937e2-b505-4d03-91b2-e6b856c31584","name":"Extrai dos dados do PDF","type":"n8n-nodes-base.extractFromFile","typeVersion":1,"position":[960,336]},{"parameters":{"assignments":{"assignments":[{"id":"28504399-c43a-42c2-a7ba-bf0e447671e3","name":"output","value":"={{ $json.text }}","type":"string"}]},"options":{}},"id":"c96d9a48-4efc-4fa6-8c66-d2cedfff3a07","name":"Extrai o texto","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1232,336]},{"parameters":{"text":"={{ $json.output }}","schemaType":"manual","inputSchema":"{\n  \"type\": \"object\",\n  \"properties\": {\n    \"data_vencimento\": {\n      \"type\": \"string\",\n      \"format\": \"date\"\n    },\n    \"numero_fatura\": {\n      \"type\": \"string\"\n    },\n    \"destinatario_cobranca\": {\n      \"type\": \"string\"\n    },\n    \"total\": {\n      \"type\": \"number\"\n    }\n  },\n  \"required\": [\"data_fatura\", \"numero_fatura\", \"destinatario_cobranca\", \"total\"]\n}\n","options":{}},"id":"4574d720-0839-4213-9142-cfe73953b5b2","name":"Extrai infos da Conta","type":"@n8n/n8n-nodes-langchain.informationExtractor","typeVersion":1,"position":[672,656]},{"parameters":{"assignments":{"assignments":[{"id":"dbcf29cc-a862-42e6-8d79-f8015faf405e","name":"response","value":"={{ $json.output }}","type":"object"}]},"options":{}},"id":"e4787dbf-11f9-46f4-9457-b20bbe748086","name":"Seta o Retorno","type":"n8n-nodes-base.set","typeVersion":3.4,"position":[1056,656]},{"parameters":{"operation":"append","documentId":{"__rl":true,"value":"1YXnXe7fcRCwpLTly1JTLLFuRWXBBomyc4dye-RKM41U","mode":"list","cachedResultName":"Banco de Dados - FinThrix","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1YXnXe7fcRCwpLTly1JTLLFuRWXBBomyc4dye-RKM41U/edit?usp=drivesdk"},"sheetName":{"__rl":true,"value":1369069022,"mode":"list","cachedResultName":"Contas","cachedResultUrl":"https://docs.google.com/spreadsheets/d/1YXnXe7fcRCwpLTly1JTLLFuRWXBBomyc4dye-RKM41U/edit#gid=1369069022"},"columns":{"mappingMode":"defineBelow","value":{"Data da Fatura":"={{ $json.response.data_vencimento }}","Número da Fatura":"={{ $json.response.numero_fatura }}","Total":"={{ $json.response.total }}","Destinatário da Cobrança":"={{ $json.response.destinatario_cobranca }}"},"matchingColumns":[],"schema":[{"id":"Data da Fatura","displayName":"Data da Fatura","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Número da Fatura","displayName":"Número da Fatura","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Total","displayName":"Total","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true},{"id":"Destinatário da Cobrança","displayName":"Destinatário da Cobrança","required":false,"defaultMatch":false,"display":true,"type":"string","canBeUsedToMatch":true}],"attemptToConvertTypes":false,"convertFieldsToString":false},"options":{}},"id":"26fb2673-6d44-4135-bc82-0a3a5c2152fe","name":"Adiciona Linha nas Contas","type":"n8n-nodes-base.googleSheets","typeVersion":4.5,"position":[1248,656],"credentials":{"googleSheetsOAuth2Api":{"id":"vZSfHHRYQWS29a4T","name":"Google Sheets - Taysa"}}},{"parameters":{"model":"openai/gpt-4o","options":{}},"type":"@n8n/n8n-nodes-langchain.lmChatOpenRouter","typeVersion":1,"position":[640,960],"id":"5b94a45a-99cd-461f-9a4a-ef612bf031b1","name":"GPT 4o"},{"parameters":{"content":"## Processa o arquivo enviado","height":300,"width":880,"color":6},"type":"n8n-nodes-base.stickyNote","position":[560,240],"typeVersion":1,"id":"b539f396-47fd-4e24-a555-89b99eb72f45","name":"Sticky Note13"},{"parameters":{"content":"## Chama IA  para Raspar o conteúdo do PDF","height":300,"width":440,"color":5},"type":"n8n-nodes-base.stickyNote","position":[560,560],"typeVersion":1,"id":"3ddbca4b-442d-42b7-8bbd-aa76037957f8","name":"Sticky Note16"},{"parameters":{"content":"## Insere Linha da Conta na Planilha","height":300,"width":420,"color":4},"type":"n8n-nodes-base.stickyNote","position":[1008,560],"typeVersion":1,"id":"12f5f4ca-b360-4c08-8f72-555430f53726","name":"Sticky Note2"},{"parameters":{"content":"## LLM","height":220,"color":7},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[560,880],"id":"32eb5831-174f-4054-be49-3fbc2df678ad","name":"Sticky Note"},{"parameters":{"content":"","height":980,"width":1540},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[176,160],"id":"d5ccd2be-99d0-48bb-871b-be83f072ef3a","name":"Sticky Note3"},{"parameters":{"content":"███████╗██╗███╗░░██╗████████╗██╗░░██╗██████╗░██╗██╗░░██╗  ░░░░░░  ██╗███╗░░░███╗██████╗░░█████╗░██████╗░████████╗░█████╗░██████╗░░█████╗░██████╗░  ██████╗░███████╗  ░█████╗░░█████╗░███╗░░██╗████████╗░█████╗░\n██╔════╝██║████╗░██║╚══██╔══╝██║░░██║██╔══██╗██║╚██╗██╔╝  ░░░░░░  ██║████╗░████║██╔══██╗██╔══██╗██╔══██╗╚══██╔══╝██╔══██╗██╔══██╗██╔══██╗██╔══██╗  ██╔══██╗██╔════╝  ██╔══██╗██╔══██╗████╗░██║╚══██╔══╝██╔══██╗\n█████╗░░██║██╔██╗██║░░░██║░░░███████║██████╔╝██║░╚███╔╝░  █████╗  ██║██╔████╔██║██████╔╝██║░░██║██████╔╝░░░██║░░░███████║██║░░██║██║░░██║██████╔╝  ██║░░██║█████╗░░  ██║░░╚═╝██║░░██║██╔██╗██║░░░██║░░░███████║\n██╔══╝░░██║██║╚████║░░░██║░░░██╔══██║██╔══██╗██║░██╔██╗░  ╚════╝  ██║██║╚██╔╝██║██╔═══╝░██║░░██║██╔══██╗░░░██║░░░██╔══██║██║░░██║██║░░██║██╔══██╗  ██║░░██║██╔══╝░░  ██║░░██╗██║░░██║██║╚████║░░░██║░░░██╔══██║\n██║░░░░░██║██║░╚███║░░░██║░░░██║░░██║██║░░██║██║██╔╝╚██╗  ░░░░░░  ██║██║░╚═╝░██║██║░░░░░╚█████╔╝██║░░██║░░░██║░░░██║░░██║██████╔╝╚█████╔╝██║░░██║  ██████╔╝███████╗  ╚█████╔╝╚█████╔╝██║░╚███║░░░██║░░░██║░░██║\n╚═╝░░░░░╚═╝╚═╝░░╚══╝░░░╚═╝░░░╚═╝░░╚═╝╚═╝░░╚═╝╚═╝╚═╝░░╚═╝  ░░░░░░  ╚═╝╚═╝░░░░░╚═╝╚═╝░░░░░░╚════╝░╚═╝░░╚═╝░░░╚═╝░░░╚═╝░░╚═╝╚═════╝░░╚════╝░╚═╝░░╚═╝  ╚═════╝░╚══════╝  ░╚════╝░░╚════╝░╚═╝░░╚══╝░░░╚═╝░░░╚═╝░░╚═╝","width":2140},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-112,48],"id":"28b46cdf-96b9-4aaa-a392-6d32274c405d","name":"Sticky Note1"}],"connections":{"Lê a pasta Contas e Faturas a cada 1 minuto":{"main":[[{"node":"Faz o Download da Conta","type":"main","index":0}]]},"Faz o Download da Conta":{"main":[[{"node":"Extrai dos dados do PDF","type":"main","index":0}]]},"Extrai dos dados do PDF":{"main":[[{"node":"Extrai o texto","type":"main","index":0}]]},"Extrai o texto":{"main":[[{"node":"Extrai infos da Conta","type":"main","index":0}]]},"Extrai infos da Conta":{"main":[[{"node":"Seta o Retorno","type":"main","index":0}]]},"Seta o Retorno":{"main":[[{"node":"Adiciona Linha nas Contas","type":"main","index":0}]]},"GPT 4o":{"ai_languageModel":[[{"node":"Extrai infos da Conta","type":"ai_languageModel","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"21959376-fe1b-486a-9ae8-c1faeb51dc4d","triggerCount":0,"tags":[]}