{"createdAt":"2025-09-18T01:12:28.383Z","updatedAt":"2025-09-18T01:13:57.593Z","id":"L2AmoG7Gjy8nMIHt","name":"Backup_Credenciais_N8N","active":false,"isArchived":false,"nodes":[{"parameters":{},"type":"n8n-nodes-base.manualTrigger","typeVersion":1,"position":[-64,192],"id":"525e865d-6cec-489b-8d61-b9878c9d4847","name":"When clicking ‘Test workflow’"},{"parameters":{"content":"## Realizar Backup das Credenciais do N8N no seu google Drive","height":286,"width":2277,"color":3},"id":"e43f4267-f486-4977-8a6e-a3c8f2a142e3","name":"Sticky Note","type":"n8n-nodes-base.stickyNote","position":[-112,112],"typeVersion":1},{"parameters":{"jsCode":"return items.map(item => {\n  // Verifique se o campo data é uma string válida e parseie\n  let data = {};\n  if (typeof item.json.data === 'string') {\n    try {\n      data = JSON.parse(item.json.data); // Converte a string JSON em objeto\n    } catch (error) {\n      return { json: { error: \"Invalid JSON format\" } };\n    }\n  }\n\n  const name = data?.name || 'No name found'; // Extrai o campo \"name\"\n\n  return {\n    json: {\n      name: name,\n      ...item.json  // Inclua os dados originais, se necessário\n    }\n  };\n});\n"},"type":"n8n-nodes-base.code","typeVersion":2,"position":[1632,192],"id":"dc712fed-923e-4297-adf8-223c31f76e04","name":"Extrair o name de cada arquivo"},{"parameters":{"resource":"folder","name":"Backup Credenciais N8N","driveId":{"__rl":true,"mode":"list","value":"My Drive"},"folderId":{"__rl":true,"mode":"list","value":"root","cachedResultName":"/ (Root folder)"},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[176,192],"id":"234c1163-ca10-4da3-96dc-e74323005012","name":"Cria Pasta Primária"},{"parameters":{"resource":"folder","name":"={{ $today.toFormat(\"yyyy/MM/dd\") }} Credenciais N8N","driveId":{"__rl":true,"mode":"list","value":"My Drive"},"folderId":{"__rl":true,"value":"={{ $json.id }}","mode":"id"},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[384,192],"id":"fd57872e-1f62-4ef0-92c7-a2a073c4f3f6","name":"Cria Pasta Credenciais Dia"},{"parameters":{"operation":"createFromText","content":"={{ $json.data }}","name":"={{ $json[\"name\"] }}.json","driveId":{"__rl":true,"mode":"list","value":"My Drive"},"folderId":{"__rl":true,"value":"={{ $('Cria Pasta Credenciais Dia').item.json.id }}","mode":"id"},"options":{}},"type":"n8n-nodes-base.googleDrive","typeVersion":3,"position":[1888,192],"id":"fb8bd565-831c-4ec3-958b-9c0317f02022","name":"Sobe Credenciais no Drive"},{"parameters":{"command":"rm -rf /home/node/n8n-backups/credentials"},"id":"7c63ca08-4951-4bb2-aac3-9fe452433d85","name":"Vai na pasta de crendenciais do N8N do seu servidor","type":"n8n-nodes-base.executeCommand","typeVersion":1,"position":[624,192]},{"parameters":{"command":"n8n export:credentials --decrypted --backup --output=/home/node/n8n-backups/credentials"},"id":"64a03d3f-ccf4-46ce-96f4-362d962f7e51","name":"Exporta as Crendenciais","type":"n8n-nodes-base.executeCommand","position":[896,192],"typeVersion":1},{"parameters":{"fileSelector":"/home/node/n8n-backups/credentials/*.json"},"id":"aa3b4393-e505-45b3-9d20-17d6fe32cc87","name":"Le os arquivos binários","type":"n8n-nodes-base.readBinaryFiles","position":[1136,192],"typeVersion":1},{"parameters":{"setAllData":false,"options":{}},"id":"d9d829f7-012d-46eb-aba6-ab4528a8f084","name":"Transforma arquivos Binários em JSONs","type":"n8n-nodes-base.moveBinaryData","position":[1392,192],"typeVersion":1},{"parameters":{"content":"█████▄░▄████▄░▄█████░██░░██░██░░░██░█████▄░░░▄█████░█████▄░▄█████░██████▄░▄█████░██████▄░▄█████░██████░▄████▄░██████░▄██████░░░██████▄░▄████▄░██████▄░░░░░░░░░░░░█████▄░██░░██░░░█████▄░██████░▄█████░██████▄░▄█████░██░░░██░▄█████░▄██████\n██░░██░██░░██░██░░░░░██░░██░██░░░██░██░░██░░░██░░░░░██░░██░██░░░░░██░░░██░██░░░░░██░░░██░██░░░░░░░██░░░██░░██░░░██░░░██░░░░░░░░██░░░██░██░░██░██░░░██░░░░░░░░░░░░██░░██░██░░██░░░██░░██░░░██░░░██░░░░░██░░░██░██░░░░░██░░░██░██░░░░░██░░░░░\n█████░░██░░██░██░░░░░█████░░██░░░██░█████▀░░░██░░░░░█████▀░█████░░██░░░██░█████░░██░░░██░██░░░░░░░██░░░██░░██░░░██░░░▀█████▄░░░██░░░██░░████░░██░░░██░░░░░░░░░░░░█████░░▀████▀░░░█████▀░░░██░░░██░░░░░██░░░██░█████░░██░░░██░█████░░▀█████▄\n██░░██░██████░██░░░░░██░░██░██░░░██░██░░░░░░░██░░░░░██░░██░██░░░░░██░░░██░██░░░░░██░░░██░██░░░░░░░██░░░██████░░░██░░░░░░░░██░░░██░░░██░██░░██░██░░░██░░░██████░░░██░░██░░░██░░░░░██░░██░░░██░░░██░░░░░██░░░██░██░░░░░██░░██░░██░░░░░░░░░░██\n█████▀░██░░██░▀█████░██░░██░▀█████▀░██░░░░░░░▀█████░██░░██░▀█████░██████▀░▀█████░██░░░██░▀█████░██████░██░░██░██████░██████▀░░░██░░░██░▀████▀░██░░░██░░░░░░░░░░░░█████▀░░░██░░░░░██░░██░██████░▀█████░██░░░██░▀█████░▀███▀░░░▀█████░██████▀\n░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░░","width":2420},"type":"n8n-nodes-base.stickyNote","typeVersion":1,"position":[-176,-80],"id":"1c153fa7-b0de-42a3-844f-896df9211206","name":"Sticky Note1"}],"connections":{"When clicking ‘Test workflow’":{"main":[[{"node":"Cria Pasta Primária","type":"main","index":0}]]},"Extrair o name de cada arquivo":{"main":[[{"node":"Sobe Credenciais no Drive","type":"main","index":0}]]},"Cria Pasta Primária":{"main":[[{"node":"Cria Pasta Credenciais Dia","type":"main","index":0}]]},"Cria Pasta Credenciais Dia":{"main":[[{"node":"Vai na pasta de crendenciais do N8N do seu servidor","type":"main","index":0}]]},"Vai na pasta de crendenciais do N8N do seu servidor":{"main":[[{"node":"Exporta as Crendenciais","type":"main","index":0}]]},"Exporta as Crendenciais":{"main":[[{"node":"Le os arquivos binários","type":"main","index":0}]]},"Le os arquivos binários":{"main":[[{"node":"Transforma arquivos Binários em JSONs","type":"main","index":0}]]},"Transforma arquivos Binários em JSONs":{"main":[[{"node":"Extrair o name de cada arquivo","type":"main","index":0}]]}},"settings":{"executionOrder":"v1"},"staticData":null,"meta":null,"pinData":{},"versionId":"5972ded7-2a50-4d7b-bab2-91fdbd8d4e88","triggerCount":0,"tags":[]}